Scope: 3 of 4 workspace projects
apps/web test:unit$ vitest run --config vitest.unit.config.ts
apps/web test:unit: [1m[46m RUN [49m[22m [36mv4.0.17 [39m[90mC:/Users/david/Documents/GitHub/accomplish/apps/web[39m
apps/web test:unit:  [32mÔ£ô[39m [30m[42m unit [49m[39m __tests__/unit/renderer/lib/utils.unit.test.ts [2m([22m[2m46 tests[22m[2m)[22m[32m 60[2mms[22m[39m
apps/web test:unit:  [32mÔ£ô[39m [30m[42m unit [49m[39m __tests__/unit/renderer/lib/accomplish.unit.test.ts [2m([22m[2m15 tests[22m[2m)[22m[32m 95[2mms[22m[39m
apps/web test:unit:  [32mÔ£ô[39m [30m[42m unit [49m[39m __tests__/unit/renderer/lib/animations.unit.test.ts [2m([22m[2m16 tests[22m[2m)[22m[32m 18[2mms[22m[39m
apps/web test:unit:  [32mÔ£ô[39m [30m[42m unit [49m[39m __tests__/unit/renderer/lib/waiting-detection.unit.test.ts [2m([22m[2m87 tests[22m[2m)[22m[32m 42[2mms[22m[39m
apps/web test:unit: [90mstderr[2m | __tests__/unit/renderer/components/BrowserPreview.unit.test.tsx[2m > [22m[2mBrowserPreview[2m > [22m[2mframe handling[2m > [22m[2mshould update img src when a frame is received
apps/web test:unit: [22m[39mAn update to BrowserPreview2 inside a test was not wrapped in act(...).
apps/web test:unit: When testing, code that causes React state updates should be wrapped into act(...):
apps/web test:unit: act(() => {
apps/web test:unit:   /* fire events that update state */
apps/web test:unit: });
apps/web test:unit: /* assert on the output */
apps/web test:unit: This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act
apps/web test:unit: [90mstderr[2m | __tests__/unit/renderer/components/BrowserPreview.unit.test.tsx[2m > [22m[2mBrowserPreview[2m > [22m[2mframe handling[2m > [22m[2mshould update the URL bar when page URL changes
apps/web test:unit: [22m[39mAn update to BrowserPreview2 inside a test was not wrapped in act(...).
apps/web test:unit: When testing, code that causes React state updates should be wrapped into act(...):
apps/web test:unit: act(() => {
apps/web test:unit:   /* fire events that update state */
apps/web test:unit: });
apps/web test:unit: /* assert on the output */
apps/web test:unit: This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act
apps/web test:unit: [90mstderr[2m | __tests__/unit/renderer/components/BrowserPreview.unit.test.tsx[2m > [22m[2mBrowserPreview[2m > [22m[2mframe handling[2m > [22m[2mshould not re-render when URL stays the same
apps/web test:unit: [22m[39mAn update to BrowserPreview2 inside a test was not wrapped in act(...).
apps/web test:unit: When testing, code that causes React state updates should be wrapped into act(...):
apps/web test:unit: act(() => {
apps/web test:unit:   /* fire events that update state */
apps/web test:unit: });
apps/web test:unit: /* assert on the output */
apps/web test:unit: This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act
apps/web test:unit: [90mstderr[2m | __tests__/unit/renderer/components/BrowserPreview.unit.test.tsx[2m > [22m[2mBrowserPreview[2m > [22m[2merror handling[2m > [22m[2mshould show error state when status reports error
apps/web test:unit: [22m[39mAn update to BrowserPreview2 inside a test was not wrapped in act(...).
apps/web test:unit: When testing, code that causes React state updates should be wrapped into act(...):
apps/web test:unit: act(() => {
apps/web test:unit:   /* fire events that update state */
apps/web test:unit: });
apps/web test:unit: /* assert on the output */
apps/web test:unit: This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act
apps/web test:unit: An update to BrowserPreview2 inside a test was not wrapped in act(...).
apps/web test:unit: When testing, code that causes React state updates should be wrapped into act(...):
apps/web test:unit: act(() => {
apps/web test:unit:   /* fire events that update state */
apps/web test:unit: });
apps/web test:unit: /* assert on the output */
apps/web test:unit: This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act
apps/web test:unit: [90mstderr[2m | __tests__/unit/renderer/components/BrowserPreview.unit.test.tsx[2m > [22m[2mBrowserPreview[2m > [22m[2merror handling[2m > [22m[2mshould show error when startBrowserScreencast fails
apps/web test:unit: [22m[39m[BrowserPreview] Failed to start screencast: Error: Server unreachable
apps/web test:unit:     at C:/Users/david/Documents/GitHub/accomplish/apps/web/__tests__/unit/renderer/components/BrowserPreview.unit.test.tsx:202:49
apps/web test:unit:     at file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m.pnpm[24m/@vitest+runner@4.0.17/node_modules/[4m@vitest/runner[24m/dist/index.js:145:11
apps/web test:unit:     at file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m.pnpm[24m/@vitest+runner@4.0.17/node_modules/[4m@vitest/runner[24m/dist/index.js:915:26
apps/web test:unit:     at file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m.pnpm[24m/@vitest+runner@4.0.17/node_modules/[4m@vitest/runner[24m/dist/index.js:1243:20
apps/web test:unit:     at new Promise (<anonymous>)
apps/web test:unit:     at runWithTimeout (file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m.pnpm[24m/@vitest+runner@4.0.17/node_modules/[4m@vitest/runner[24m/dist/index.js:1209:10)
apps/web test:unit:     at file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m.pnpm[24m/@vitest+runner@4.0.17/node_modules/[4m@vitest/runner[24m/dist/index.js:1653:37
apps/web test:unit:     at Traces.$ (file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m.pnpm[24m/vitest@4.0.17_@types+node@22.19.3_happy-dom@20.6.1_jiti@1.21.7_jsdom@27.4.0_yaml@2.8.2/node_modules/[4mvitest[24m/dist/chunks/traces.CCmnQaNT.js:142:27)
apps/web test:unit:     at trace (file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m.pnpm[24m/vitest@4.0.17_@types+node@22.19.3_happy-dom@20.6.1_jiti@1.21.7_jsdom@27.4.0_yaml@2.8.2/node_modules/[4mvitest[24m/dist/chunks/test.B8ej_ZHS.js:239:21)
apps/web test:unit:     at runTest (file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m.pnpm[24m/@vitest+runner@4.0.17/node_modules/[4m@vitest/runner[24m/dist/index.js:1653:12)
apps/web test:unit:  [32mÔ£ô[39m [30m[42m unit [49m[39m __tests__/unit/renderer/components/BrowserPreview.unit.test.tsx [2m([22m[2m13 tests[22m[2m)[22m[33m 344[2mms[22m[39m
apps/web test:unit:  [32mÔ£ô[39m [30m[42m unit [49m[39m __tests__/unit/renderer/components/BedrockApiKeyTab.unit.test.tsx [2m([22m[2m12 tests[22m[2m)[22m[32m 196[2mms[22m[39m
apps/web test:unit: [2m Test Files [22m [1m[32m6 passed[39m[22m[90m (6)[39m
apps/web test:unit: [2m      Tests [22m [1m[32m189 passed[39m[22m[90m (189)[39m
apps/web test:unit: [2m   Start at [22m 17:56:18
apps/web test:unit: [2m   Duration [22m 9.73s[2m (transform 2.38s, setup 6.85s, import 6.04s, tests 755ms, environment 30.40s)[22m
apps/web test:unit: Done
apps/desktop test:unit$ vitest run --config vitest.unit.config.ts
apps/desktop test:unit: [1m[46m RUN [49m[22m [36mv4.0.17 [39m[90mC:/Users/david/Documents/GitHub/accomplish/apps/desktop[39m
apps/desktop test:unit:  [32mÔ£ô[39m [30m[42m unit [49m[39m __tests__/unit/main/opencode/adapter.unit.test.ts [2m([22m[2m44 tests[22m[2m)[22m[33m 366[2mms[22m[39m
apps/desktop test:unit:  [32mÔ£ô[39m [30m[42m unit [49m[39m __tests__/main/config.unit.test.ts [2m([22m[2m14 tests[22m[2m)[22m[32m 148[2mms[22m[39m
apps/desktop test:unit: [90mstdout[2m | __tests__/unit/main/opencode/auth-browser.unit.test.ts[2m > [22m[2mOAuthBrowserFlow[2m > [22m[2misInProgress()[2m > [22m[2mshould return false when no flow is active
apps/desktop test:unit: [22m[39m[agent-core] u2d sync test
apps/desktop test:unit: [90mstdout[2m | __tests__/unit/main/ipc/handlers.unit.test.ts
apps/desktop test:unit: [22m[39m[agent-core] u2d sync test
apps/desktop test:unit: [90mstdout[2m | __tests__/main/ipc/handlers-utils.unit.test.ts
apps/desktop test:unit: [22m[39m[agent-core] u2d sync test
apps/desktop test:unit: [90mstdout[2m | __tests__/main/ipc/validation.unit.test.ts
apps/desktop test:unit: [22m[39m[agent-core] u2d sync test
apps/desktop test:unit: [90mstdout[2m | __tests__/unit/main/ipc/handlers.screencast.unit.test.ts
apps/desktop test:unit: [22m[39m[agent-core] u2d sync test
apps/desktop test:unit: [90mstdout[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > [22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > [22m[2mConstructor[2m > [22m[2mshould create task manager with default max concurrent tasks
apps/desktop test:unit: [22m[39m[agent-core] u2d sync test
apps/desktop test:unit: [90mstdout[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > [22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > [22m[2mstartTask()[2m > [22m[2mshould start a single task successfully
apps/desktop test:unit: [22m[39m[TaskManager] Executing task task-1. Active tasks: 1
apps/desktop test:unit: [90mstderr[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > [22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > [22m[2mstartTask()[2m > [22m[2mshould start a single task successfully
apps/desktop test:unit: [22m[39m[LogWatcher] Error finding latest log: TypeError: Cannot read properties of undefined (reading 'readdir')
apps/desktop test:unit:     at OpenCodeLogWatcher.findAndWatchLatestLog (C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/OpenCodeLogWatcher.ts:174:39)
apps/desktop test:unit:     at OpenCodeLogWatcher.start (C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/OpenCodeLogWatcher.ts:132:16)
apps/desktop test:unit:     at OpenCodeAdapter.startTask (C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/OpenCodeAdapter.ts:194:29)
apps/desktop test:unit:     at C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/TaskManager.ts:310:23
apps/desktop test:unit:     at TaskManager.executeTask (C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/TaskManager.ts:321:5)
apps/desktop test:unit:     at TaskManager.startTask (C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/TaskManager.ts:118:17)
apps/desktop test:unit: [90m    at processTicksAndRejections (node:internal/process/task_queues:103:5)[39m
apps/desktop test:unit:     at C:/Users/david/Documents/GitHub/accomplish/apps/desktop/__tests__/unit/main/opencode/task-manager.unit.test.ts:337:22
apps/desktop test:unit:     at file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m.pnpm[24m/@vitest+runner@4.0.17/node_modules/[4m@vitest/runner[24m/dist/index.js:915:20
apps/desktop test:unit: [90mstdout[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > [22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > [22m[2mstartTask()[2m > [22m[2mshould start a single task successfully
apps/desktop test:unit: [22m[39m[OpenCode CLI] Starting: opencode 
apps/desktop test:unit: [90mstderr[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > [22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > [22m[2mstartTask()[2m > [22m[2mshould start a single task successfully
apps/desktop test:unit: [22m[39m[LogWatcher] Could not watch log directory: TypeError: __vite_ssr_import_1__.default.watch is not a function
apps/desktop test:unit:     at OpenCodeLogWatcher.start (C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/OpenCodeLogWatcher.ts:139:25)
apps/desktop test:unit: [90m    at processTicksAndRejections (node:internal/process/task_queues:103:5)[39m
apps/desktop test:unit:     at OpenCodeAdapter.startTask (C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/OpenCodeAdapter.ts:194:7)
apps/desktop test:unit:     at C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/TaskManager.ts:310:9
apps/desktop test:unit: [90mstdout[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > [22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > [22m[2mstartTask()[2m > [22m[2mshould start a single task successfully
apps/desktop test:unit: [22m[39m[OpenCode CLI] Command: opencode
apps/desktop test:unit: [OpenCode CLI] Args: 
apps/desktop test:unit: [OpenCode CLI] Working directory: /mock/working-dir
apps/desktop test:unit: [OpenCode CLI] PTY spawn: /bin/sh -c opencode
apps/desktop test:unit: [OpenCode CLI] PTY Process PID: 12345
apps/desktop test:unit: [90mstdout[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > [22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > [22m[2mstartTask()[2m > [22m[2mshould throw error if task ID already exists
apps/desktop test:unit: [22m[39m[TaskManager] Executing task task-1. Active tasks: 1
apps/desktop test:unit: [90mstderr[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > [22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > [22m[2mstartTask()[2m > [22m[2mshould throw error if task ID already exists
apps/desktop test:unit: [22m[39m[LogWatcher] Error finding latest log: TypeError: Cannot read properties of undefined (reading 'readdir')
apps/desktop test:unit:     at OpenCodeLogWatcher.findAndWatchLatestLog (C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/OpenCodeLogWatcher.ts:174:39)
apps/desktop test:unit:     at OpenCodeLogWatcher.start (C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/OpenCodeLogWatcher.ts:132:16)
apps/desktop test:unit:     at OpenCodeAdapter.startTask (C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/OpenCodeAdapter.ts:194:29)
apps/desktop test:unit:     at C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/TaskManager.ts:310:23
apps/desktop test:unit:     at TaskManager.executeTask (C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/TaskManager.ts:321:5)
apps/desktop test:unit:     at TaskManager.startTask (C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/TaskManager.ts:118:17)
apps/desktop test:unit: [90m    at processTicksAndRejections (node:internal/process/task_queues:103:5)[39m
apps/desktop test:unit:     at C:/Users/david/Documents/GitHub/accomplish/apps/desktop/__tests__/unit/main/opencode/task-manager.unit.test.ts:352:9
apps/desktop test:unit:     at file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m.pnpm[24m/@vitest+runner@4.0.17/node_modules/[4m@vitest/runner[24m/dist/index.js:915:20
apps/desktop test:unit: [90mstderr[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > [22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > [22m[2mstartTask()[2m > [22m[2mshould throw error if task ID already exists
apps/desktop test:unit: [22m[39m[LogWatcher] Could not watch log directory: TypeError: __vite_ssr_import_1__.default.watch is not a function
apps/desktop test:unit:     at OpenCodeLogWatcher.start (C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/OpenCodeLogWatcher.ts:139:25)
apps/desktop test:unit: [90m    at processTicksAndRejections (node:internal/process/task_queues:103:5)[39m
apps/desktop test:unit:     at OpenCodeAdapter.startTask (C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/OpenCodeAdapter.ts:194:7)
apps/desktop test:unit:     at C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/TaskManager.ts:310:9
apps/desktop test:unit: [90mstdout[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > [22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > [22m[2mstartTask()[2m > [22m[2mshould throw error if task ID already exists
apps/desktop test:unit: [22m[39m[OpenCode CLI] Starting: opencode 
apps/desktop test:unit: [90mstdout[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > [22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > [22m[2mstartTask()[2m > [22m[2mshould throw error if task ID already exists
apps/desktop test:unit: [22m[39m[OpenCode CLI] Command: opencode
apps/desktop test:unit: [OpenCode CLI] Args: 
apps/desktop test:unit: [OpenCode CLI] Working directory: /mock/working-dir
apps/desktop test:unit: [OpenCode CLI] PTY spawn: /bin/sh -c opencode
apps/desktop test:unit: [OpenCode CLI] PTY Process PID: 12345
apps/desktop test:unit: [90mstdout[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > [22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > [22m[2mstartTask()[2m > [22m[2mshould execute multiple tasks in parallel up to limit
apps/desktop test:unit: [22m[39m[TaskManager] Executing task task-1. Active tasks: 1
apps/desktop test:unit: [90mstderr[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > [22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > [22m[2mstartTask()[2m > [22m[2mshould execute multiple tasks in parallel up to limit
apps/desktop test:unit: [22m[39m[LogWatcher] Error finding latest log: TypeError: Cannot read properties of undefined (reading 'readdir')
apps/desktop test:unit:     at OpenCodeLogWatcher.findAndWatchLatestLog (C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/OpenCodeLogWatcher.ts:174:39)
apps/desktop test:unit:     at OpenCodeLogWatcher.start (C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/OpenCodeLogWatcher.ts:132:16)
apps/desktop test:unit:     at OpenCodeAdapter.startTask (C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/OpenCodeAdapter.ts:194:29)
apps/desktop test:unit:     at C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/TaskManager.ts:310:23
apps/desktop test:unit:     at TaskManager.executeTask (C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/TaskManager.ts:321:5)
apps/desktop test:unit:     at TaskManager.startTask (C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/TaskManager.ts:118:17)
apps/desktop test:unit: [90m    at processTicksAndRejections (node:internal/process/task_queues:103:5)[39m
apps/desktop test:unit:     at C:/Users/david/Documents/GitHub/accomplish/apps/desktop/__tests__/unit/main/opencode/task-manager.unit.test.ts:365:9
apps/desktop test:unit:     at file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m.pnpm[24m/@vitest+runner@4.0.17/node_modules/[4m@vitest/runner[24m/dist/index.js:915:20
apps/desktop test:unit: [90mstdout[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > [22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > [22m[2mstartTask()[2m > [22m[2mshould execute multiple tasks in parallel up to limit
apps/desktop test:unit: [22m[39m[OpenCode CLI] Starting: opencode 
apps/desktop test:unit:  [32mÔ£ô[39m [30m[42m unit [49m[39m __tests__/main/ipc/handlers-utils.unit.test.ts [2m([22m[2m60 tests[22m[2m)[22m[32m 46[2mms[22m[39m
apps/desktop test:unit: [90mstderr[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > [22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > [22m[2mstartTask()[2m > [22m[2mshould execute multiple tasks in parallel up to limit
apps/desktop test:unit: [22m[39m[LogWatcher] Could not watch log directory: TypeError: __vite_ssr_import_1__.default.watch is not a function
apps/desktop test:unit:     at OpenCodeLogWatcher.start (C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/OpenCodeLogWatcher.ts:139:25)
apps/desktop test:unit: [90m    at processTicksAndRejections (node:internal/process/task_queues:103:5)[39m
apps/desktop test:unit:     at OpenCodeAdapter.startTask (C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/OpenCodeAdapter.ts:194:7)
apps/desktop test:unit:     at C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/TaskManager.ts:310:9
apps/desktop test:unit: [90mstderr[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > [22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > [22m[2mstartTask()[2m > [22m[2mshould execute multiple tasks in parallel up to limit
apps/desktop test:unit: [22m[39m[LogWatcher] Error finding latest log: TypeError: Cannot read properties of undefined (reading 'readdir')
apps/desktop test:unit:     at OpenCodeLogWatcher.findAndWatchLatestLog (C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/OpenCodeLogWatcher.ts:174:39)
apps/desktop test:unit:     at OpenCodeLogWatcher.start (C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/OpenCodeLogWatcher.ts:132:16)
apps/desktop test:unit:     at OpenCodeAdapter.startTask (C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/OpenCodeAdapter.ts:194:29)
apps/desktop test:unit:     at C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/TaskManager.ts:310:23
apps/desktop test:unit:     at TaskManager.executeTask (C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/TaskManager.ts:321:5)
apps/desktop test:unit:     at TaskManager.startTask (C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/TaskManager.ts:118:17)
apps/desktop test:unit: [90m    at processTicksAndRejections (node:internal/process/task_queues:103:5)[39m
apps/desktop test:unit:     at C:/Users/david/Documents/GitHub/accomplish/apps/desktop/__tests__/unit/main/opencode/task-manager.unit.test.ts:366:9
apps/desktop test:unit:     at file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m.pnpm[24m/@vitest+runner@4.0.17/node_modules/[4m@vitest/runner[24m/dist/index.js:915:20
apps/desktop test:unit: [90mstderr[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > [22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > [22m[2mstartTask()[2m > [22m[2mshould execute multiple tasks in parallel up to limit
apps/desktop test:unit: [22m[39m[LogWatcher] Could not watch log directory: TypeError: __vite_ssr_import_1__.default.watch is not a function
apps/desktop test:unit:     at OpenCodeLogWatcher.start (C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/OpenCodeLogWatcher.ts:139:25)
apps/desktop test:unit: [90m    at processTicksAndRejections (node:internal/process/task_queues:103:5)[39m
apps/desktop test:unit:     at OpenCodeAdapter.startTask (C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/OpenCodeAdapter.ts:194:7)
apps/desktop test:unit:     at C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/TaskManager.ts:310:9
apps/desktop test:unit: [90mstderr[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > [22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > [22m[2mstartTask()[2m > [22m[2mshould execute multiple tasks in parallel up to limit
apps/desktop test:unit: [22m[39m[LogWatcher] Error finding latest log: TypeError: Cannot read properties of undefined (reading 'readdir')
apps/desktop test:unit:     at OpenCodeLogWatcher.findAndWatchLatestLog (C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/OpenCodeLogWatcher.ts:174:39)
apps/desktop test:unit:     at OpenCodeLogWatcher.start (C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/OpenCodeLogWatcher.ts:132:16)
apps/desktop test:unit:     at OpenCodeAdapter.startTask (C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/OpenCodeAdapter.ts:194:29)
apps/desktop test:unit:     at C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/TaskManager.ts:310:23
apps/desktop test:unit:     at TaskManager.executeTask (C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/TaskManager.ts:321:5)
apps/desktop test:unit:     at TaskManager.startTask (C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/TaskManager.ts:118:17)
apps/desktop test:unit: [90m    at processTicksAndRejections (node:internal/process/task_queues:103:5)[39m
apps/desktop test:unit:     at C:/Users/david/Documents/GitHub/accomplish/apps/desktop/__tests__/unit/main/opencode/task-manager.unit.test.ts:367:9
apps/desktop test:unit:     at file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m.pnpm[24m/@vitest+runner@4.0.17/node_modules/[4m@vitest/runner[24m/dist/index.js:915:20
apps/desktop test:unit: [90mstderr[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > [22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > [22m[2mstartTask()[2m > [22m[2mshould execute multiple tasks in parallel up to limit
apps/desktop test:unit: [22m[39m[LogWatcher] Could not watch log directory: TypeError: __vite_ssr_import_1__.default.watch is not a function
apps/desktop test:unit:     at OpenCodeLogWatcher.start (C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/OpenCodeLogWatcher.ts:139:25)
apps/desktop test:unit: [90m    at processTicksAndRejections (node:internal/process/task_queues:103:5)[39m
apps/desktop test:unit:     at OpenCodeAdapter.startTask (C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/OpenCodeAdapter.ts:194:7)
apps/desktop test:unit:     at C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/TaskManager.ts:310:9
apps/desktop test:unit: [90mstdout[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > [22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > [22m[2mstartTask()[2m > [22m[2mshould execute multiple tasks in parallel up to limit
apps/desktop test:unit: [22m[39m[OpenCode CLI] Command: opencode
apps/desktop test:unit: [OpenCode CLI] Args: 
apps/desktop test:unit: [OpenCode CLI] Working directory: /mock/working-dir
apps/desktop test:unit: [OpenCode CLI] PTY spawn: /bin/sh -c opencode
apps/desktop test:unit: [OpenCode CLI] PTY Process PID: 12345
apps/desktop test:unit: [TaskManager] Executing task task-2. Active tasks: 2
apps/desktop test:unit: [90mstdout[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > [22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > [22m[2mstartTask()[2m > [22m[2mshould execute multiple tasks in parallel up to limit
apps/desktop test:unit: [22m[39m[OpenCode CLI] Starting: opencode 
apps/desktop test:unit: [90mstdout[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > [22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > [22m[2mstartTask()[2m > [22m[2mshould execute multiple tasks in parallel up to limit
apps/desktop test:unit: [22m[39m[OpenCode CLI] Command: opencode
apps/desktop test:unit: [OpenCode CLI] Args: 
apps/desktop test:unit: [OpenCode CLI] Working directory: /mock/working-dir
apps/desktop test:unit: [OpenCode CLI] PTY spawn: /bin/sh -c opencode
apps/desktop test:unit: [OpenCode CLI] PTY Process PID: 12345
apps/desktop test:unit: [TaskManager] Executing task task-3. Active tasks: 3
apps/desktop test:unit: [90mstdout[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > [22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > [22m[2mstartTask()[2m > [22m[2mshould execute multiple tasks in parallel up to limit
apps/desktop test:unit: [22m[39m[OpenCode CLI] Starting: opencode 
apps/desktop test:unit: [90mstdout[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > [22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > [22m[2mstartTask()[2m > [22m[2mshould execute multiple tasks in parallel up to limit
apps/desktop test:unit: [22m[39m[OpenCode CLI] Command: opencode
apps/desktop test:unit: [OpenCode CLI] Args: 
apps/desktop test:unit: [OpenCode CLI] Working directory: /mock/working-dir
apps/desktop test:unit: [OpenCode CLI] PTY spawn: /bin/sh -c opencode
apps/desktop test:unit: [OpenCode CLI] PTY Process PID: 12345
apps/desktop test:unit:  [32mÔ£ô[39m [30m[42m unit [49m[39m __tests__/main/ipc/validation.unit.test.ts [2m([22m[2m43 tests[22m[2m)[22m[32m 70[2mms[22m[39m
apps/desktop test:unit: [90mstdout[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > [22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > [22m[2mstartTask()[2m > [22m[2mshould queue tasks when at capacity
apps/desktop test:unit: [22m[39m[TaskManager] Executing task task-1. Active tasks: 1
apps/desktop test:unit: [90mstderr[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > [22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > [22m[2mstartTask()[2m > [22m[2mshould queue tasks when at capacity
apps/desktop test:unit: [22m[39m[LogWatcher] Error finding latest log: TypeError: Cannot read properties of undefined (reading 'readdir')
apps/desktop test:unit:     at OpenCodeLogWatcher.findAndWatchLatestLog (C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/OpenCodeLogWatcher.ts:174:39)
apps/desktop test:unit:     at OpenCodeLogWatcher.start (C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/OpenCodeLogWatcher.ts:132:16)
apps/desktop test:unit:     at OpenCodeAdapter.startTask (C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/OpenCodeAdapter.ts:194:29)
apps/desktop test:unit:     at C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/TaskManager.ts:310:23
apps/desktop test:unit:     at TaskManager.executeTask (C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/TaskManager.ts:321:5)
apps/desktop test:unit:     at TaskManager.startTask (C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/TaskManager.ts:118:17)
apps/desktop test:unit: [90m    at processTicksAndRejections (node:internal/process/task_queues:103:5)[39m
apps/desktop test:unit:     at C:/Users/david/Documents/GitHub/accomplish/apps/desktop/__tests__/unit/main/opencode/task-manager.unit.test.ts:382:9
apps/desktop test:unit:     at file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m.pnpm[24m/@vitest+runner@4.0.17/node_modules/[4m@vitest/runner[24m/dist/index.js:915:20
apps/desktop test:unit: [90mstdout[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > [22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > [22m[2mstartTask()[2m > [22m[2mshould queue tasks when at capacity
apps/desktop test:unit: [22m[39m[OpenCode CLI] Starting: opencode 
apps/desktop test:unit: [90mstdout[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > [22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > [22m[2mstartTask()[2m > [22m[2mshould queue tasks when at capacity
apps/desktop test:unit: [22m[39m[OpenCode CLI] Command: opencode
apps/desktop test:unit: [OpenCode CLI] Args: 
apps/desktop test:unit: [OpenCode CLI] Working directory: /mock/working-dir
apps/desktop test:unit: [OpenCode CLI] PTY spawn: /bin/sh -c opencode
apps/desktop test:unit: [OpenCode CLI] PTY Process PID: 12345
apps/desktop test:unit: [TaskManager] Executing task task-2. Active tasks: 2
apps/desktop test:unit: [90mstderr[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > [22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > [22m[2mstartTask()[2m > [22m[2mshould queue tasks when at capacity
apps/desktop test:unit: [22m[39m[LogWatcher] Could not watch log directory: TypeError: __vite_ssr_import_1__.default.watch is not a function
apps/desktop test:unit:     at OpenCodeLogWatcher.start (C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/OpenCodeLogWatcher.ts:139:25)
apps/desktop test:unit: [90m    at processTicksAndRejections (node:internal/process/task_queues:103:5)[39m
apps/desktop test:unit:     at OpenCodeAdapter.startTask (C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/OpenCodeAdapter.ts:194:7)
apps/desktop test:unit:     at C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/TaskManager.ts:310:9
apps/desktop test:unit: [90mstderr[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > [22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > [22m[2mstartTask()[2m > [22m[2mshould queue tasks when at capacity
apps/desktop test:unit: [22m[39m[LogWatcher] Error finding latest log: TypeError: Cannot read properties of undefined (reading 'readdir')
apps/desktop test:unit:     at OpenCodeLogWatcher.findAndWatchLatestLog (C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/OpenCodeLogWatcher.ts:174:39)
apps/desktop test:unit:     at OpenCodeLogWatcher.start (C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/OpenCodeLogWatcher.ts:132:16)
apps/desktop test:unit:     at OpenCodeAdapter.startTask (C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/OpenCodeAdapter.ts:194:29)
apps/desktop test:unit:     at C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/TaskManager.ts:310:23
apps/desktop test:unit:     at TaskManager.executeTask (C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/TaskManager.ts:321:5)
apps/desktop test:unit:     at TaskManager.startTask (C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/TaskManager.ts:118:17)
apps/desktop test:unit: [90m    at processTicksAndRejections (node:internal/process/task_queues:103:5)[39m
apps/desktop test:unit:     at C:/Users/david/Documents/GitHub/accomplish/apps/desktop/__tests__/unit/main/opencode/task-manager.unit.test.ts:383:9
apps/desktop test:unit:     at file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m.pnpm[24m/@vitest+runner@4.0.17/node_modules/[4m@vitest/runner[24m/dist/index.js:915:20
apps/desktop test:unit: [90mstderr[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > [22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > [22m[2mstartTask()[2m > [22m[2mshould queue tasks when at capacity
apps/desktop test:unit: [22m[39m[LogWatcher] Could not watch log directory: TypeError: __vite_ssr_import_1__.default.watch is not a function
apps/desktop test:unit:     at OpenCodeLogWatcher.start (C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/OpenCodeLogWatcher.ts:139:25)
apps/desktop test:unit: [90m    at processTicksAndRejections (node:internal/process/task_queues:103:5)[39m
apps/desktop test:unit:     at OpenCodeAdapter.startTask (C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/OpenCodeAdapter.ts:194:7)
apps/desktop test:unit:     at C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/TaskManager.ts:310:9
apps/desktop test:unit: [90mstdout[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > [22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > [22m[2mstartTask()[2m > [22m[2mshould queue tasks when at capacity
apps/desktop test:unit: [22m[39m[OpenCode CLI] Starting: opencode 
apps/desktop test:unit: [90mstdout[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > [22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > [22m[2mstartTask()[2m > [22m[2mshould queue tasks when at capacity
apps/desktop test:unit: [22m[39m[OpenCode CLI] Command: opencode
apps/desktop test:unit: [OpenCode CLI] Args: 
apps/desktop test:unit: [OpenCode CLI] Working directory: /mock/working-dir
apps/desktop test:unit: [OpenCode CLI] PTY spawn: /bin/sh -c opencode
apps/desktop test:unit: [OpenCode CLI] PTY Process PID: 12345
apps/desktop test:unit: [TaskManager] At max concurrent tasks (2). Queueing task task-3
apps/desktop test:unit: [TaskManager] Task task-3 queued. Queue length: 1
apps/desktop test:unit: [90mstdout[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > [22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > [22m[2mstartTask()[2m > [22m[2mshould throw error when queue is full
apps/desktop test:unit: [22m[39m[TaskManager] Executing task task-1. Active tasks: 1
apps/desktop test:unit: [90mstderr[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > [22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > [22m[2mstartTask()[2m > [22m[2mshould throw error when queue is full
apps/desktop test:unit: [22m[39m[LogWatcher] Error finding latest log: TypeError: Cannot read properties of undefined (reading 'readdir')
apps/desktop test:unit:     at OpenCodeLogWatcher.findAndWatchLatestLog (C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/OpenCodeLogWatcher.ts:174:39)
apps/desktop test:unit:     at OpenCodeLogWatcher.start (C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/OpenCodeLogWatcher.ts:132:16)
apps/desktop test:unit:     at OpenCodeAdapter.startTask (C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/OpenCodeAdapter.ts:194:29)
apps/desktop test:unit:     at C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/TaskManager.ts:310:23
apps/desktop test:unit:     at TaskManager.executeTask (C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/TaskManager.ts:321:5)
apps/desktop test:unit:     at TaskManager.startTask (C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/TaskManager.ts:118:17)
apps/desktop test:unit: [90m    at processTicksAndRejections (node:internal/process/task_queues:103:5)[39m
apps/desktop test:unit:     at C:/Users/david/Documents/GitHub/accomplish/apps/desktop/__tests__/unit/main/opencode/task-manager.unit.test.ts:401:9
apps/desktop test:unit:     at file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m.pnpm[24m/@vitest+runner@4.0.17/node_modules/[4m@vitest/runner[24m/dist/index.js:915:20
apps/desktop test:unit: [90mstderr[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > [22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > [22m[2mstartTask()[2m > [22m[2mshould throw error when queue is full
apps/desktop test:unit: [22m[39m[LogWatcher] Could not watch log directory: TypeError: __vite_ssr_import_1__.default.watch is not a function
apps/desktop test:unit:     at OpenCodeLogWatcher.start (C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/OpenCodeLogWatcher.ts:139:25)
apps/desktop test:unit: [90m    at processTicksAndRejections (node:internal/process/task_queues:103:5)[39m
apps/desktop test:unit:     at OpenCodeAdapter.startTask (C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/OpenCodeAdapter.ts:194:7)
apps/desktop test:unit:     at C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/TaskManager.ts:310:9
apps/desktop test:unit: [90mstdout[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > [22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > [22m[2mstartTask()[2m > [22m[2mshould throw error when queue is full
apps/desktop test:unit: [22m[39m[OpenCode CLI] Starting: opencode 
apps/desktop test:unit: [90mstdout[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > [22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > [22m[2mstartTask()[2m > [22m[2mshould throw error when queue is full
apps/desktop test:unit: [22m[39m[OpenCode CLI] Command: opencode
apps/desktop test:unit: [OpenCode CLI] Args: 
apps/desktop test:unit: [OpenCode CLI] Working directory: /mock/working-dir
apps/desktop test:unit: [OpenCode CLI] PTY spawn: /bin/sh -c opencode
apps/desktop test:unit: [OpenCode CLI] PTY Process PID: 12345
apps/desktop test:unit: [TaskManager] At max concurrent tasks (1). Queueing task task-2
apps/desktop test:unit: [TaskManager] Task task-2 queued. Queue length: 1
apps/desktop test:unit: [90mstdout[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > [22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > [22m[2mstartTask()[2m > [22m[2mshould throw error when queue is full
apps/desktop test:unit: [22m[39m[TaskManager] At max concurrent tasks (1). Queueing task task-3
apps/desktop test:unit: [90mstderr[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > [22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > [22m[2mTask Event Handling[2m > [22m[2mshould forward message events to callbacks
apps/desktop test:unit: [22m[39m[LogWatcher] Error finding latest log: TypeError: Cannot read properties of undefined (reading 'readdir')
apps/desktop test:unit:     at OpenCodeLogWatcher.findAndWatchLatestLog (C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/OpenCodeLogWatcher.ts:174:39)
apps/desktop test:unit:     at OpenCodeLogWatcher.start (C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/OpenCodeLogWatcher.ts:132:16)
apps/desktop test:unit:     at OpenCodeAdapter.startTask (C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/OpenCodeAdapter.ts:194:29)
apps/desktop test:unit:     at C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/TaskManager.ts:310:23
apps/desktop test:unit:     at TaskManager.executeTask (C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/TaskManager.ts:321:5)
apps/desktop test:unit:     at TaskManager.startTask (C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/TaskManager.ts:118:17)
apps/desktop test:unit: [90m    at processTicksAndRejections (node:internal/process/task_queues:103:5)[39m
apps/desktop test:unit:     at C:/Users/david/Documents/GitHub/accomplish/apps/desktop/__tests__/unit/main/opencode/task-manager.unit.test.ts:416:9
apps/desktop test:unit:     at file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m.pnpm[24m/@vitest+runner@4.0.17/node_modules/[4m@vitest/runner[24m/dist/index.js:915:20
apps/desktop test:unit: [90mstderr[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > [22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > [22m[2mTask Event Handling[2m > [22m[2mshould forward message events to callbacks
apps/desktop test:unit: [22m[39m[LogWatcher] Could not watch log directory: TypeError: __vite_ssr_import_1__.default.watch is not a function
apps/desktop test:unit:     at OpenCodeLogWatcher.start (C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/OpenCodeLogWatcher.ts:139:25)
apps/desktop test:unit: [90m    at processTicksAndRejections (node:internal/process/task_queues:103:5)[39m
apps/desktop test:unit:     at OpenCodeAdapter.startTask (C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/OpenCodeAdapter.ts:194:7)
apps/desktop test:unit:     at C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/TaskManager.ts:310:9
apps/desktop test:unit: [90mstdout[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > [22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > [22m[2mTask Event Handling[2m > [22m[2mshould forward message events to callbacks
apps/desktop test:unit: [22m[39m[TaskManager] Executing task task-1. Active tasks: 1
apps/desktop test:unit: [90mstdout[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > [22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > [22m[2mTask Event Handling[2m > [22m[2mshould forward message events to callbacks
apps/desktop test:unit: [22m[39m[OpenCode CLI] Starting: opencode 
apps/desktop test:unit: [90mstdout[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > [22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > [22m[2mTask Event Handling[2m > [22m[2mshould forward message events to callbacks
apps/desktop test:unit: [22m[39m[OpenCode CLI] Command: opencode
apps/desktop test:unit: [OpenCode CLI] Args: 
apps/desktop test:unit: [OpenCode CLI] Working directory: /mock/working-dir
apps/desktop test:unit: [OpenCode CLI] PTY spawn: /bin/sh -c opencode
apps/desktop test:unit: [OpenCode CLI] PTY Process PID: 12345
apps/desktop test:unit: [90mstderr[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > [22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > [22m[2mTask Event Handling[2m > [22m[2mshould forward progress events to callbacks
apps/desktop test:unit: [22m[39m[LogWatcher] Error finding latest log: TypeError: Cannot read properties of undefined (reading 'readdir')
apps/desktop test:unit:     at OpenCodeLogWatcher.findAndWatchLatestLog (C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/OpenCodeLogWatcher.ts:174:39)
apps/desktop test:unit:     at OpenCodeLogWatcher.start (C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/OpenCodeLogWatcher.ts:132:16)
apps/desktop test:unit:     at OpenCodeAdapter.startTask (C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/OpenCodeAdapter.ts:194:29)
apps/desktop test:unit:     at C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/TaskManager.ts:310:23
apps/desktop test:unit:     at TaskManager.executeTask (C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/TaskManager.ts:321:5)
apps/desktop test:unit:     at TaskManager.startTask (C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/TaskManager.ts:118:17)
apps/desktop test:unit: [90m    at processTicksAndRejections (node:internal/process/task_queues:103:5)[39m
apps/desktop test:unit:     at C:/Users/david/Documents/GitHub/accomplish/apps/desktop/__tests__/unit/main/opencode/task-manager.unit.test.ts:427:9
apps/desktop test:unit:     at file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m.pnpm[24m/@vitest+runner@4.0.17/node_modules/[4m@vitest/runner[24m/dist/index.js:915:20
apps/desktop test:unit: [90mstderr[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > [22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > [22m[2mTask Event Handling[2m > [22m[2mshould forward progress events to callbacks
apps/desktop test:unit: [22m[39m[LogWatcher] Could not watch log directory: TypeError: __vite_ssr_import_1__.default.watch is not a function
apps/desktop test:unit:     at OpenCodeLogWatcher.start (C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/OpenCodeLogWatcher.ts:139:25)
apps/desktop test:unit: [90m    at processTicksAndRejections (node:internal/process/task_queues:103:5)[39m
apps/desktop test:unit:     at OpenCodeAdapter.startTask (C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/OpenCodeAdapter.ts:194:7)
apps/desktop test:unit:     at C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/TaskManager.ts:310:9
apps/desktop test:unit: [90mstdout[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > [22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > [22m[2mTask Event Handling[2m > [22m[2mshould forward progress events to callbacks
apps/desktop test:unit: [22m[39m[TaskManager] Executing task task-1. Active tasks: 1
apps/desktop test:unit: [90mstdout[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > [22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > [22m[2mTask Event Handling[2m > [22m[2mshould forward progress events to callbacks
apps/desktop test:unit: [22m[39m[OpenCode CLI] Starting: opencode 
apps/desktop test:unit: [90mstdout[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > [22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > [22m[2mTask Event Handling[2m > [22m[2mshould forward progress events to callbacks
apps/desktop test:unit: [22m[39m[OpenCode CLI] Command: opencode
apps/desktop test:unit: [OpenCode CLI] Args: 
apps/desktop test:unit: [OpenCode CLI] Working directory: /mock/working-dir
apps/desktop test:unit: [OpenCode CLI] PTY spawn: /bin/sh -c opencode
apps/desktop test:unit: [OpenCode CLI] PTY Process PID: 12345
apps/desktop test:unit: [90mstdout[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > [22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > [22m[2mTask Event Handling[2m > [22m[2mshould cleanup task on completion and process queue
apps/desktop test:unit: [22m[39m[TaskManager] Executing task task-1. Active tasks: 1
apps/desktop test:unit: [90mstderr[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > [22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > [22m[2mTask Event Handling[2m > [22m[2mshould cleanup task on completion and process queue
apps/desktop test:unit: [22m[39m[LogWatcher] Error finding latest log: TypeError: Cannot read properties of undefined (reading 'readdir')
apps/desktop test:unit:     at OpenCodeLogWatcher.findAndWatchLatestLog (C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/OpenCodeLogWatcher.ts:174:39)
apps/desktop test:unit:     at OpenCodeLogWatcher.start (C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/OpenCodeLogWatcher.ts:132:16)
apps/desktop test:unit:     at OpenCodeAdapter.startTask (C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/OpenCodeAdapter.ts:194:29)
apps/desktop test:unit:     at C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/TaskManager.ts:310:23
apps/desktop test:unit:     at TaskManager.executeTask (C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/TaskManager.ts:321:5)
apps/desktop test:unit:     at TaskManager.startTask (C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/TaskManager.ts:118:17)
apps/desktop test:unit:     at C:/Users/david/Documents/GitHub/accomplish/apps/desktop/__tests__/unit/main/opencode/task-manager.unit.test.ts:444:9
apps/desktop test:unit:     at file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m.pnpm[24m/@vitest+runner@4.0.17/node_modules/[4m@vitest/runner[24m/dist/index.js:915:20
apps/desktop test:unit: [90mstderr[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > [22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > [22m[2mTask Event Handling[2m > [22m[2mshould cleanup task on completion and process queue
apps/desktop test:unit: [22m[39m[LogWatcher] Could not watch log directory: TypeError: __vite_ssr_import_1__.default.watch is not a function
apps/desktop test:unit:     at OpenCodeLogWatcher.start (C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/OpenCodeLogWatcher.ts:139:25)
apps/desktop test:unit:     at OpenCodeAdapter.startTask (C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/OpenCodeAdapter.ts:194:7)
apps/desktop test:unit:     at C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/TaskManager.ts:310:9
apps/desktop test:unit: [90mstdout[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > [22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > [22m[2mTask Event Handling[2m > [22m[2mshould cleanup task on completion and process queue
apps/desktop test:unit: [22m[39m[OpenCode CLI] Starting: opencode 
apps/desktop test:unit: [90mstdout[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > [22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > [22m[2mTask Event Handling[2m > [22m[2mshould cleanup task on completion and process queue
apps/desktop test:unit: [22m[39m[OpenCode CLI] Command: opencode
apps/desktop test:unit: [OpenCode CLI] Args: 
apps/desktop test:unit: [OpenCode CLI] Working directory: /mock/working-dir
apps/desktop test:unit: [OpenCode CLI] PTY spawn: /bin/sh -c opencode
apps/desktop test:unit: [OpenCode CLI] PTY Process PID: 12345
apps/desktop test:unit: [TaskManager] At max concurrent tasks (1). Queueing task task-2
apps/desktop test:unit: [TaskManager] Task task-2 queued. Queue length: 1
apps/desktop test:unit: [90mstdout[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > [22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > [22m[2mTask Event Handling[2m > [22m[2mshould cleanup task on error and process queue
apps/desktop test:unit: [22m[39m[TaskManager] Executing task task-1. Active tasks: 1
apps/desktop test:unit: [90mstdout[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > [22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > [22m[2mTask Event Handling[2m > [22m[2mshould cleanup task on error and process queue
apps/desktop test:unit: [22m[39m[OpenCode CLI] Starting: opencode 
apps/desktop test:unit: [90mstdout[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > [22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > [22m[2mTask Event Handling[2m > [22m[2mshould cleanup task on error and process queue
apps/desktop test:unit: [22m[39m[OpenCode CLI] Command: opencode
apps/desktop test:unit: [OpenCode CLI] Args: 
apps/desktop test:unit: [OpenCode CLI] Working directory: /mock/working-dir
apps/desktop test:unit: [OpenCode CLI] PTY spawn: /bin/sh -c opencode
apps/desktop test:unit: [OpenCode CLI] PTY Process PID: 12345
apps/desktop test:unit: [TaskManager] At max concurrent tasks (1). Queueing task task-2
apps/desktop test:unit: [TaskManager] Task task-2 queued. Queue length: 1
apps/desktop test:unit: [90mstderr[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > [22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > [22m[2mTask Event Handling[2m > [22m[2mshould cleanup task on error and process queue
apps/desktop test:unit: [22m[39m[LogWatcher] Error finding latest log: TypeError: Cannot read properties of undefined (reading 'readdir')
apps/desktop test:unit:     at OpenCodeLogWatcher.findAndWatchLatestLog (C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/OpenCodeLogWatcher.ts:174:39)
apps/desktop test:unit:     at OpenCodeLogWatcher.start (C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/OpenCodeLogWatcher.ts:132:16)
apps/desktop test:unit:     at OpenCodeAdapter.startTask (C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/OpenCodeAdapter.ts:194:29)
apps/desktop test:unit:     at C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/TaskManager.ts:310:23
apps/desktop test:unit:     at TaskManager.executeTask (C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/TaskManager.ts:321:5)
apps/desktop test:unit:     at TaskManager.startTask (C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/TaskManager.ts:118:17)
apps/desktop test:unit:     at C:/Users/david/Documents/GitHub/accomplish/apps/desktop/__tests__/unit/main/opencode/task-manager.unit.test.ts:462:9
apps/desktop test:unit:     at file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m.pnpm[24m/@vitest+runner@4.0.17/node_modules/[4m@vitest/runner[24m/dist/index.js:915:20
apps/desktop test:unit: [90mstderr[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > [22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > [22m[2mTask Event Handling[2m > [22m[2mshould cleanup task on error and process queue
apps/desktop test:unit: [22m[39m[LogWatcher] Could not watch log directory: TypeError: __vite_ssr_import_1__.default.watch is not a function
apps/desktop test:unit:     at OpenCodeLogWatcher.start (C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/OpenCodeLogWatcher.ts:139:25)
apps/desktop test:unit:     at OpenCodeAdapter.startTask (C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/OpenCodeAdapter.ts:194:7)
apps/desktop test:unit:     at C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/TaskManager.ts:310:9
apps/desktop test:unit: [90mstderr[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > [22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > [22m[2mcancelTask()[2m > [22m[2mshould cancel a running task
apps/desktop test:unit: [22m[39m[LogWatcher] Error finding latest log: TypeError: Cannot read properties of undefined (reading 'readdir')
apps/desktop test:unit:     at OpenCodeLogWatcher.findAndWatchLatestLog (C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/OpenCodeLogWatcher.ts:174:39)
apps/desktop test:unit:     at OpenCodeLogWatcher.start (C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/OpenCodeLogWatcher.ts:132:16)
apps/desktop test:unit:     at OpenCodeAdapter.startTask (C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/OpenCodeAdapter.ts:194:29)
apps/desktop test:unit:     at C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/TaskManager.ts:310:23
apps/desktop test:unit:     at TaskManager.executeTask (C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/TaskManager.ts:321:5)
apps/desktop test:unit:     at TaskManager.startTask (C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/TaskManager.ts:118:17)
apps/desktop test:unit:     at C:/Users/david/Documents/GitHub/accomplish/apps/desktop/__tests__/unit/main/opencode/task-manager.unit.test.ts:476:9
apps/desktop test:unit:     at file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m.pnpm[24m/@vitest+runner@4.0.17/node_modules/[4m@vitest/runner[24m/dist/index.js:915:20
apps/desktop test:unit: [90mstderr[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > [22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > [22m[2mcancelTask()[2m > [22m[2mshould cancel a running task
apps/desktop test:unit: [22m[39m[LogWatcher] Could not watch log directory: TypeError: __vite_ssr_import_1__.default.watch is not a function
apps/desktop test:unit:     at OpenCodeLogWatcher.start (C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/OpenCodeLogWatcher.ts:139:25)
apps/desktop test:unit:     at OpenCodeAdapter.startTask (C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/OpenCodeAdapter.ts:194:7)
apps/desktop test:unit:     at C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/TaskManager.ts:310:9
apps/desktop test:unit: [90mstdout[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > [22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > [22m[2mcancelTask()[2m > [22m[2mshould cancel a running task
apps/desktop test:unit: [22m[39m[TaskManager] Executing task task-1. Active tasks: 1
apps/desktop test:unit: [90mstdout[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > [22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > [22m[2mcancelTask()[2m > [22m[2mshould cancel a running task
apps/desktop test:unit: [22m[39m[OpenCode CLI] Starting: opencode 
apps/desktop test:unit: [TaskManager] Cancelling running task task-1
apps/desktop test:unit: [OpenCode CLI] Command: opencode
apps/desktop test:unit: [OpenCode CLI] Args: 
apps/desktop test:unit: [OpenCode CLI] Working directory: /mock/working-dir
apps/desktop test:unit: [OpenCode CLI] PTY spawn: /bin/sh -c opencode
apps/desktop test:unit: [OpenCode CLI] PTY Process PID: 12345
apps/desktop test:unit: [TaskManager] Cleaning up task task-1
apps/desktop test:unit: [OpenCode Adapter] Disposing adapter for task task-1
apps/desktop test:unit: [OpenCode Adapter] Adapter disposed
apps/desktop test:unit: [TaskManager] Task task-1 cleaned up. Active tasks: 0
apps/desktop test:unit: [TaskManager] Queue empty, no more tasks to process
apps/desktop test:unit: [90mstderr[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > [22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > [22m[2mcancelTask()[2m > [22m[2mshould cancel a queued task
apps/desktop test:unit: [22m[39m[LogWatcher] Error finding latest log: TypeError: Cannot read properties of undefined (reading 'readdir')
apps/desktop test:unit:     at OpenCodeLogWatcher.findAndWatchLatestLog (C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/OpenCodeLogWatcher.ts:174:39)
apps/desktop test:unit:     at OpenCodeLogWatcher.start (C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/OpenCodeLogWatcher.ts:132:16)
apps/desktop test:unit:     at OpenCodeAdapter.startTask (C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/OpenCodeAdapter.ts:194:29)
apps/desktop test:unit:     at C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/TaskManager.ts:310:23
apps/desktop test:unit:     at TaskManager.executeTask (C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/TaskManager.ts:321:5)
apps/desktop test:unit:     at TaskManager.startTask (C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/TaskManager.ts:118:17)
apps/desktop test:unit:     at C:/Users/david/Documents/GitHub/accomplish/apps/desktop/__tests__/unit/main/opencode/task-manager.unit.test.ts:488:9
apps/desktop test:unit:     at file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m.pnpm[24m/@vitest+runner@4.0.17/node_modules/[4m@vitest/runner[24m/dist/index.js:915:20
apps/desktop test:unit: [90mstderr[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > [22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > [22m[2mcancelTask()[2m > [22m[2mshould cancel a queued task
apps/desktop test:unit: [22m[39m[LogWatcher] Could not watch log directory: TypeError: __vite_ssr_import_1__.default.watch is not a function
apps/desktop test:unit:     at OpenCodeLogWatcher.start (C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/OpenCodeLogWatcher.ts:139:25)
apps/desktop test:unit:     at OpenCodeAdapter.startTask (C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/OpenCodeAdapter.ts:194:7)
apps/desktop test:unit:     at C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/TaskManager.ts:310:9
apps/desktop test:unit: [90mstdout[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > [22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > [22m[2mcancelTask()[2m > [22m[2mshould cancel a queued task
apps/desktop test:unit: [22m[39m[TaskManager] Executing task task-1. Active tasks: 1
apps/desktop test:unit: [90mstdout[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > [22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > [22m[2mcancelTask()[2m > [22m[2mshould cancel a queued task
apps/desktop test:unit: [22m[39m[OpenCode CLI] Starting: opencode 
apps/desktop test:unit: [90mstdout[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > [22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > [22m[2mcancelTask()[2m > [22m[2mshould cancel a queued task
apps/desktop test:unit: [22m[39m[OpenCode CLI] Command: opencode
apps/desktop test:unit: [OpenCode CLI] Args: 
apps/desktop test:unit: [OpenCode CLI] Working directory: /mock/working-dir
apps/desktop test:unit: [OpenCode CLI] PTY spawn: /bin/sh -c opencode
apps/desktop test:unit: [OpenCode CLI] PTY Process PID: 12345
apps/desktop test:unit: [TaskManager] At max concurrent tasks (1). Queueing task task-2
apps/desktop test:unit: [TaskManager] Task task-2 queued. Queue length: 1
apps/desktop test:unit: [90mstdout[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > [22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > [22m[2mcancelTask()[2m > [22m[2mshould cancel a queued task
apps/desktop test:unit: [22m[39m[TaskManager] Cancelling queued task task-2
apps/desktop test:unit: [90mstderr[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > [22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > [22m[2mcancelTask()[2m > [22m[2mshould handle cancellation of non-existent task gracefully
apps/desktop test:unit: [22m[39m[TaskManager] Task non-existent not found for cancellation
apps/desktop test:unit: [90mstdout[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > [22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > [22m[2mcancelTask()[2m > [22m[2mshould process queue after cancellation
apps/desktop test:unit: [22m[39m[TaskManager] Executing task task-1. Active tasks: 1
apps/desktop test:unit: [90mstderr[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > [22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > [22m[2mcancelTask()[2m > [22m[2mshould process queue after cancellation
apps/desktop test:unit: [22m[39m[LogWatcher] Error finding latest log: TypeError: Cannot read properties of undefined (reading 'readdir')
apps/desktop test:unit:     at OpenCodeLogWatcher.findAndWatchLatestLog (C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/OpenCodeLogWatcher.ts:174:39)
apps/desktop test:unit:     at OpenCodeLogWatcher.start (C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/OpenCodeLogWatcher.ts:132:16)
apps/desktop test:unit:     at OpenCodeAdapter.startTask (C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/OpenCodeAdapter.ts:194:29)
apps/desktop test:unit:     at C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/TaskManager.ts:310:23
apps/desktop test:unit:     at TaskManager.executeTask (C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/TaskManager.ts:321:5)
apps/desktop test:unit:     at TaskManager.startTask (C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/TaskManager.ts:118:17)
apps/desktop test:unit:     at C:/Users/david/Documents/GitHub/accomplish/apps/desktop/__tests__/unit/main/opencode/task-manager.unit.test.ts:514:9
apps/desktop test:unit:     at file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m.pnpm[24m/@vitest+runner@4.0.17/node_modules/[4m@vitest/runner[24m/dist/index.js:915:20
apps/desktop test:unit: [90mstdout[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > [22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > [22m[2mcancelTask()[2m > [22m[2mshould process queue after cancellation
apps/desktop test:unit: [22m[39m[OpenCode CLI] Starting: opencode 
apps/desktop test:unit: [90mstdout[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > [22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > [22m[2mcancelTask()[2m > [22m[2mshould process queue after cancellation
apps/desktop test:unit: [22m[39m[OpenCode CLI] Command: opencode
apps/desktop test:unit: [OpenCode CLI] Args: 
apps/desktop test:unit: [OpenCode CLI] Working directory: /mock/working-dir
apps/desktop test:unit: [OpenCode CLI] PTY spawn: /bin/sh -c opencode
apps/desktop test:unit: [OpenCode CLI] PTY Process PID: 12345
apps/desktop test:unit: [TaskManager] At max concurrent tasks (1). Queueing task task-2
apps/desktop test:unit: [TaskManager] Task task-2 queued. Queue length: 1
apps/desktop test:unit: [90mstdout[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > [22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > [22m[2mcancelTask()[2m > [22m[2mshould process queue after cancellation
apps/desktop test:unit: [22m[39m[TaskManager] Cancelling running task task-1
apps/desktop test:unit: [90mstderr[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > [22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > [22m[2mcancelTask()[2m > [22m[2mshould process queue after cancellation
apps/desktop test:unit: [22m[39m[LogWatcher] Could not watch log directory: TypeError: __vite_ssr_import_1__.default.watch is not a function
apps/desktop test:unit:     at OpenCodeLogWatcher.start (C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/OpenCodeLogWatcher.ts:139:25)
apps/desktop test:unit:     at OpenCodeAdapter.startTask (C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/OpenCodeAdapter.ts:194:7)
apps/desktop test:unit:     at C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/TaskManager.ts:310:9
apps/desktop test:unit: [90mstdout[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > [22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > [22m[2mcancelTask()[2m > [22m[2mshould process queue after cancellation
apps/desktop test:unit: [22m[39m[TaskManager] Cleaning up task task-1
apps/desktop test:unit: [OpenCode Adapter] Disposing adapter for task task-1
apps/desktop test:unit: [OpenCode Adapter] Adapter disposed
apps/desktop test:unit: [TaskManager] Task task-1 cleaned up. Active tasks: 0
apps/desktop test:unit: [TaskManager] Processing queue. Starting task task-2. Active: 0, Remaining in queue: 0
apps/desktop test:unit: [TaskManager] Executing task task-2. Active tasks: 1
apps/desktop test:unit: [90mstderr[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > [22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > [22m[2mcancelTask()[2m > [22m[2mshould process queue after cancellation
apps/desktop test:unit: [22m[39m[LogWatcher] Error finding latest log: TypeError: Cannot read properties of undefined (reading 'readdir')
apps/desktop test:unit:     at OpenCodeLogWatcher.findAndWatchLatestLog (C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/OpenCodeLogWatcher.ts:174:39)
apps/desktop test:unit:     at OpenCodeLogWatcher.start (C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/OpenCodeLogWatcher.ts:132:16)
apps/desktop test:unit:     at OpenCodeAdapter.startTask (C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/OpenCodeAdapter.ts:194:29)
apps/desktop test:unit:     at C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/TaskManager.ts:310:23
apps/desktop test:unit:     at TaskManager.executeTask (C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/TaskManager.ts:321:5)
apps/desktop test:unit:     at TaskManager.processQueue (C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/TaskManager.ts:336:20)
apps/desktop test:unit:     at TaskManager.cancelTask (C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/TaskManager.ts:368:12)
apps/desktop test:unit:     at C:/Users/david/Documents/GitHub/accomplish/apps/desktop/__tests__/unit/main/opencode/task-manager.unit.test.ts:518:9
apps/desktop test:unit:     at file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m.pnpm[24m/@vitest+runner@4.0.17/node_modules/[4m@vitest/runner[24m/dist/index.js:915:20
apps/desktop test:unit: [90mstderr[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > [22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > [22m[2mcancelTask()[2m > [22m[2mshould process queue after cancellation
apps/desktop test:unit: [22m[39m[LogWatcher] Could not watch log directory: TypeError: __vite_ssr_import_1__.default.watch is not a function
apps/desktop test:unit:     at OpenCodeLogWatcher.start (C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/OpenCodeLogWatcher.ts:139:25)
apps/desktop test:unit:     at OpenCodeAdapter.startTask (C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/OpenCodeAdapter.ts:194:7)
apps/desktop test:unit:     at C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/TaskManager.ts:310:9
apps/desktop test:unit: (node:332) MaxListenersExceededWarning: Possible EventEmitter memory leak detected. 11 data listeners added to [MockPty]. MaxListeners is 10. Use emitter.setMaxListeners() to increase limit
apps/desktop test:unit: (Use `node --trace-warnings ...` to show where the warning was created)
apps/desktop test:unit: (node:332) MaxListenersExceededWarning: Possible EventEmitter memory leak detected. 11 exit listeners added to [MockPty]. MaxListeners is 10. Use emitter.setMaxListeners() to increase limit
apps/desktop test:unit: [90mstdout[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > [22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > [22m[2mcancelTask()[2m > [22m[2mshould process queue after cancellation
apps/desktop test:unit: [22m[39m[TaskManager] Queue empty, no more tasks to process
apps/desktop test:unit: [90mstdout[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > [22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > [22m[2mcancelTask()[2m > [22m[2mshould process queue after cancellation
apps/desktop test:unit: [22m[39m[OpenCode CLI] Starting: opencode 
apps/desktop test:unit: [90mstdout[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > [22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > [22m[2mcancelTask()[2m > [22m[2mshould process queue after cancellation
apps/desktop test:unit: [22m[39m[OpenCode CLI] Command: opencode
apps/desktop test:unit: [OpenCode CLI] Args: 
apps/desktop test:unit: [OpenCode CLI] Working directory: /mock/working-dir
apps/desktop test:unit: [OpenCode CLI] PTY spawn: /bin/sh -c opencode
apps/desktop test:unit: [OpenCode CLI] PTY Process PID: 12345
apps/desktop test:unit: [90mstdout[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > [22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > [22m[2minterruptTask()[2m > [22m[2mshould interrupt a running task
apps/desktop test:unit: [22m[39m[TaskManager] Executing task task-1. Active tasks: 1
apps/desktop test:unit: [90mstderr[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > [22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > [22m[2minterruptTask()[2m > [22m[2mshould interrupt a running task
apps/desktop test:unit: [22m[39m[LogWatcher] Error finding latest log: TypeError: Cannot read properties of undefined (reading 'readdir')
apps/desktop test:unit:     at OpenCodeLogWatcher.findAndWatchLatestLog (C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/OpenCodeLogWatcher.ts:174:39)
apps/desktop test:unit:     at OpenCodeLogWatcher.start (C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/OpenCodeLogWatcher.ts:132:16)
apps/desktop test:unit:     at OpenCodeAdapter.startTask (C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/OpenCodeAdapter.ts:194:29)
apps/desktop test:unit:     at C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/TaskManager.ts:310:23
apps/desktop test:unit:     at TaskManager.executeTask (C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/TaskManager.ts:321:5)
apps/desktop test:unit:     at TaskManager.startTask (C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/TaskManager.ts:118:17)
apps/desktop test:unit:     at C:/Users/david/Documents/GitHub/accomplish/apps/desktop/__tests__/unit/main/opencode/task-manager.unit.test.ts:532:9
apps/desktop test:unit:     at file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m.pnpm[24m/@vitest+runner@4.0.17/node_modules/[4m@vitest/runner[24m/dist/index.js:915:20
apps/desktop test:unit: [90mstdout[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > [22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > [22m[2minterruptTask()[2m > [22m[2mshould interrupt a running task
apps/desktop test:unit: [22m[39m[OpenCode CLI] Starting: opencode 
apps/desktop test:unit: [TaskManager] Interrupting task task-1
apps/desktop test:unit: [OpenCode CLI] No active process to interrupt
apps/desktop test:unit: [OpenCode CLI] Command: opencode
apps/desktop test:unit: [OpenCode CLI] Args: 
apps/desktop test:unit: [OpenCode CLI] Working directory: /mock/working-dir
apps/desktop test:unit: [OpenCode CLI] PTY spawn: /bin/sh -c opencode
apps/desktop test:unit: [OpenCode CLI] PTY Process PID: 12345
apps/desktop test:unit: [90mstderr[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > [22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > [22m[2minterruptTask()[2m > [22m[2mshould interrupt a running task
apps/desktop test:unit: [22m[39m[LogWatcher] Could not watch log directory: TypeError: __vite_ssr_import_1__.default.watch is not a function
apps/desktop test:unit:     at OpenCodeLogWatcher.start (C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/OpenCodeLogWatcher.ts:139:25)
apps/desktop test:unit:     at OpenCodeAdapter.startTask (C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/OpenCodeAdapter.ts:194:7)
apps/desktop test:unit:     at C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/TaskManager.ts:310:9
apps/desktop test:unit: [90mstderr[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > [22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > [22m[2minterruptTask()[2m > [22m[2mshould handle interruption of non-existent task gracefully
apps/desktop test:unit: [22m[39m[TaskManager] Task non-existent not found for interruption
apps/desktop test:unit: [90mstdout[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > [22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > [22m[2mcancelQueuedTask()[2m > [22m[2mshould remove task from queue and return true
apps/desktop test:unit: [22m[39m[TaskManager] Executing task task-1. Active tasks: 1
apps/desktop test:unit: [90mstderr[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > [22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > [22m[2mcancelQueuedTask()[2m > [22m[2mshould remove task from queue and return true
apps/desktop test:unit: [22m[39m[LogWatcher] Error finding latest log: TypeError: Cannot read properties of undefined (reading 'readdir')
apps/desktop test:unit:     at OpenCodeLogWatcher.findAndWatchLatestLog (C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/OpenCodeLogWatcher.ts:174:39)
apps/desktop test:unit:     at OpenCodeLogWatcher.start (C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/OpenCodeLogWatcher.ts:132:16)
apps/desktop test:unit:     at OpenCodeAdapter.startTask (C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/OpenCodeAdapter.ts:194:29)
apps/desktop test:unit:     at C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/TaskManager.ts:310:23
apps/desktop test:unit:     at TaskManager.executeTask (C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/TaskManager.ts:321:5)
apps/desktop test:unit:     at TaskManager.startTask (C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/TaskManager.ts:118:17)
apps/desktop test:unit:     at C:/Users/david/Documents/GitHub/accomplish/apps/desktop/__tests__/unit/main/opencode/task-manager.unit.test.ts:551:9
apps/desktop test:unit:     at file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m.pnpm[24m/@vitest+runner@4.0.17/node_modules/[4m@vitest/runner[24m/dist/index.js:915:20
apps/desktop test:unit: [90mstderr[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > [22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > [22m[2mcancelQueuedTask()[2m > [22m[2mshould remove task from queue and return true
apps/desktop test:unit: [22m[39m[LogWatcher] Could not watch log directory: TypeError: __vite_ssr_import_1__.default.watch is not a function
apps/desktop test:unit:     at OpenCodeLogWatcher.start (C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/OpenCodeLogWatcher.ts:139:25)
apps/desktop test:unit:     at OpenCodeAdapter.startTask (C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/OpenCodeAdapter.ts:194:7)
apps/desktop test:unit:     at C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/TaskManager.ts:310:9
apps/desktop test:unit: [90mstdout[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > [22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > [22m[2mcancelQueuedTask()[2m > [22m[2mshould remove task from queue and return true
apps/desktop test:unit: [22m[39m[OpenCode CLI] Starting: opencode 
apps/desktop test:unit: [90mstdout[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > [22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > [22m[2mcancelQueuedTask()[2m > [22m[2mshould remove task from queue and return true
apps/desktop test:unit: [22m[39m[OpenCode CLI] Command: opencode
apps/desktop test:unit: [OpenCode CLI] Args: 
apps/desktop test:unit: [OpenCode CLI] Working directory: /mock/working-dir
apps/desktop test:unit: [OpenCode CLI] PTY spawn: /bin/sh -c opencode
apps/desktop test:unit: [OpenCode CLI] PTY Process PID: 12345
apps/desktop test:unit: [TaskManager] At max concurrent tasks (1). Queueing task task-2
apps/desktop test:unit: [TaskManager] Task task-2 queued. Queue length: 1
apps/desktop test:unit: [90mstdout[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > [22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > [22m[2mcancelQueuedTask()[2m > [22m[2mshould remove task from queue and return true
apps/desktop test:unit: [22m[39m[TaskManager] Removing task task-2 from queue
apps/desktop test:unit: [90mstdout[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > [22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > [22m[2mcancelQueuedTask()[2m > [22m[2mshould return false for non-queued task
apps/desktop test:unit: [22m[39m[TaskManager] Executing task task-1. Active tasks: 1
apps/desktop test:unit: [90mstderr[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > [22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > [22m[2mcancelQueuedTask()[2m > [22m[2mshould return false for non-queued task
apps/desktop test:unit: [22m[39m[LogWatcher] Error finding latest log: TypeError: Cannot read properties of undefined (reading 'readdir')
apps/desktop test:unit:     at OpenCodeLogWatcher.findAndWatchLatestLog (C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/OpenCodeLogWatcher.ts:174:39)
apps/desktop test:unit:     at OpenCodeLogWatcher.start (C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/OpenCodeLogWatcher.ts:132:16)
apps/desktop test:unit:     at OpenCodeAdapter.startTask (C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/OpenCodeAdapter.ts:194:29)
apps/desktop test:unit:     at C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/TaskManager.ts:310:23
apps/desktop test:unit:     at TaskManager.executeTask (C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/TaskManager.ts:321:5)
apps/desktop test:unit:     at TaskManager.startTask (C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/TaskManager.ts:118:17)
apps/desktop test:unit:     at C:/Users/david/Documents/GitHub/accomplish/apps/desktop/__tests__/unit/main/opencode/task-manager.unit.test.ts:565:9
apps/desktop test:unit:     at file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m.pnpm[24m/@vitest+runner@4.0.17/node_modules/[4m@vitest/runner[24m/dist/index.js:915:20
apps/desktop test:unit: [90mstderr[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > [22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > [22m[2mcancelQueuedTask()[2m > [22m[2mshould return false for non-queued task
apps/desktop test:unit: [22m[39m[LogWatcher] Could not watch log directory: TypeError: __vite_ssr_import_1__.default.watch is not a function
apps/desktop test:unit:     at OpenCodeLogWatcher.start (C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/OpenCodeLogWatcher.ts:139:25)
apps/desktop test:unit:     at OpenCodeAdapter.startTask (C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/OpenCodeAdapter.ts:194:7)
apps/desktop test:unit:     at C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/TaskManager.ts:310:9
apps/desktop test:unit: [90mstdout[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > [22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > [22m[2mcancelQueuedTask()[2m > [22m[2mshould return false for non-queued task
apps/desktop test:unit: [22m[39m[OpenCode CLI] Starting: opencode 
apps/desktop test:unit: [90mstdout[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > [22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > [22m[2mcancelQueuedTask()[2m > [22m[2mshould return false for non-queued task
apps/desktop test:unit: [22m[39m[OpenCode CLI] Command: opencode
apps/desktop test:unit: [OpenCode CLI] Args: 
apps/desktop test:unit: [OpenCode CLI] Working directory: /mock/working-dir
apps/desktop test:unit: [OpenCode CLI] PTY spawn: /bin/sh -c opencode
apps/desktop test:unit: [OpenCode CLI] PTY Process PID: 12345
apps/desktop test:unit: [90mstdout[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > [22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > [22m[2msendResponse()[2m > [22m[2mshould attempt to send response to active task
apps/desktop test:unit: [22m[39m[TaskManager] Executing task task-1. Active tasks: 1
apps/desktop test:unit: [90mstderr[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > [22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > [22m[2msendResponse()[2m > [22m[2mshould attempt to send response to active task
apps/desktop test:unit: [22m[39m[LogWatcher] Error finding latest log: TypeError: Cannot read properties of undefined (reading 'readdir')
apps/desktop test:unit:     at OpenCodeLogWatcher.findAndWatchLatestLog (C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/OpenCodeLogWatcher.ts:174:39)
apps/desktop test:unit:     at OpenCodeLogWatcher.start (C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/OpenCodeLogWatcher.ts:132:16)
apps/desktop test:unit:     at OpenCodeAdapter.startTask (C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/OpenCodeAdapter.ts:194:29)
apps/desktop test:unit:     at C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/TaskManager.ts:310:23
apps/desktop test:unit:     at TaskManager.executeTask (C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/TaskManager.ts:321:5)
apps/desktop test:unit:     at TaskManager.startTask (C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/TaskManager.ts:118:17)
apps/desktop test:unit:     at C:/Users/david/Documents/GitHub/accomplish/apps/desktop/__tests__/unit/main/opencode/task-manager.unit.test.ts:579:9
apps/desktop test:unit:     at file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m.pnpm[24m/@vitest+runner@4.0.17/node_modules/[4m@vitest/runner[24m/dist/index.js:915:20
apps/desktop test:unit: [90mstderr[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > [22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > [22m[2msendResponse()[2m > [22m[2mshould attempt to send response to active task
apps/desktop test:unit: [22m[39m[LogWatcher] Could not watch log directory: TypeError: __vite_ssr_import_1__.default.watch is not a function
apps/desktop test:unit:     at OpenCodeLogWatcher.start (C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/OpenCodeLogWatcher.ts:139:25)
apps/desktop test:unit:     at OpenCodeAdapter.startTask (C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/OpenCodeAdapter.ts:194:7)
apps/desktop test:unit:     at C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/TaskManager.ts:310:9
apps/desktop test:unit: [90mstdout[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > [22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > [22m[2msendResponse()[2m > [22m[2mshould attempt to send response to active task
apps/desktop test:unit: [22m[39m[OpenCode CLI] Starting: opencode 
apps/desktop test:unit: [90mstdout[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > [22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > [22m[2msendResponse()[2m > [22m[2mshould attempt to send response to active task
apps/desktop test:unit: [22m[39m[OpenCode CLI] Command: opencode
apps/desktop test:unit: [OpenCode CLI] Args: 
apps/desktop test:unit: [OpenCode CLI] Working directory: /mock/working-dir
apps/desktop test:unit: [OpenCode CLI] PTY spawn: /bin/sh -c opencode
apps/desktop test:unit: [OpenCode CLI] PTY Process PID: 12345
apps/desktop test:unit: [90mstderr[2m | __tests__/unit/main/ipc/handlers.screencast.unit.test.ts[2m > [22m[2mScreencast IPC Handlers[2m > [22m[2mbrowser:start-screencast[2m > [22m[2mshould throw when the start endpoint returns an error
apps/desktop test:unit: [22m[39mIPC handler browser:start-screencast failed Error: Failed to start screencast: Page not found
apps/desktop test:unit:     at C:/Users/david/Documents/GitHub/accomplish/apps/desktop/src/main/ipc/handlers.ts:1246:13
apps/desktop test:unit: [90m    at processTicksAndRejections (node:internal/process/task_queues:103:5)[39m
apps/desktop test:unit:     at C:/Users/david/Documents/GitHub/accomplish/apps/desktop/src/main/ipc/handlers.ts:133:14
apps/desktop test:unit:     at C:/Users/david/Documents/GitHub/accomplish/apps/desktop/__tests__/unit/main/ipc/handlers.screencast.unit.test.ts:428:7
apps/desktop test:unit:     at file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m.pnpm[24m/@vitest+runner@4.0.17/node_modules/[4m@vitest/runner[24m/dist/index.js:915:20
apps/desktop test:unit: [90mstdout[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > [22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > [22m[2mgetSessionId()[2m > [22m[2mshould return session ID for active task after adapter starts
apps/desktop test:unit: [22m[39m[TaskManager] Executing task task-1. Active tasks: 1
apps/desktop test:unit: [90mstderr[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > [22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > [22m[2mgetSessionId()[2m > [22m[2mshould return session ID for active task after adapter starts
apps/desktop test:unit: [22m[39m[LogWatcher] Error finding latest log: TypeError: Cannot read properties of undefined (reading 'readdir')
apps/desktop test:unit:     at OpenCodeLogWatcher.findAndWatchLatestLog (C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/OpenCodeLogWatcher.ts:174:39)
apps/desktop test:unit:     at OpenCodeLogWatcher.start (C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/OpenCodeLogWatcher.ts:132:16)
apps/desktop test:unit:     at OpenCodeAdapter.startTask (C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/OpenCodeAdapter.ts:194:29)
apps/desktop test:unit:     at C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/TaskManager.ts:310:23
apps/desktop test:unit:     at TaskManager.executeTask (C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/TaskManager.ts:321:5)
apps/desktop test:unit:     at TaskManager.startTask (C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/TaskManager.ts:118:17)
apps/desktop test:unit:     at C:/Users/david/Documents/GitHub/accomplish/apps/desktop/__tests__/unit/main/opencode/task-manager.unit.test.ts:604:9
apps/desktop test:unit:     at file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m.pnpm[24m/@vitest+runner@4.0.17/node_modules/[4m@vitest/runner[24m/dist/index.js:915:20
apps/desktop test:unit: [90mstdout[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > [22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > [22m[2mgetSessionId()[2m > [22m[2mshould return session ID for active task after adapter starts
apps/desktop test:unit: [22m[39m[OpenCode CLI] Starting: opencode 
apps/desktop test:unit: [90mstdout[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > [22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > [22m[2mgetSessionId()[2m > [22m[2mshould return session ID for active task after adapter starts
apps/desktop test:unit: [22m[39m[OpenCode CLI] Command: opencode
apps/desktop test:unit: [OpenCode CLI] Args: 
apps/desktop test:unit: [OpenCode CLI] Working directory: /mock/working-dir
apps/desktop test:unit: [OpenCode CLI] PTY spawn: /bin/sh -c opencode
apps/desktop test:unit: [OpenCode CLI] PTY Process PID: 12345
apps/desktop test:unit: [90mstderr[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > [22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > [22m[2mgetSessionId()[2m > [22m[2mshould return session ID for active task after adapter starts
apps/desktop test:unit: [22m[39m[LogWatcher] Could not watch log directory: TypeError: __vite_ssr_import_1__.default.watch is not a function
apps/desktop test:unit:     at OpenCodeLogWatcher.start (C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/OpenCodeLogWatcher.ts:139:25)
apps/desktop test:unit:     at OpenCodeAdapter.startTask (C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/OpenCodeAdapter.ts:194:7)
apps/desktop test:unit:     at C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/TaskManager.ts:310:9
apps/desktop test:unit: [90mstderr[2m | __tests__/unit/main/ipc/handlers.screencast.unit.test.ts[2m > [22m[2mScreencast IPC Handlers[2m > [22m[2mbrowser:start-screencast[2m > [22m[2mshould send error status when WebSocket errors
apps/desktop test:unit: [22m[39m[IPC] Screencast WebSocket error: Connection refused
apps/desktop test:unit:  [32mÔ£ô[39m [30m[42m unit [49m[39m __tests__/unit/main/ipc/handlers.screencast.unit.test.ts [2m([22m[2m17 tests[22m[2m)[22m[32m 109[2mms[22m[39m
apps/desktop test:unit: [90mstdout[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > [22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > [22m[2mState Query Methods[2m > [22m[2mshould report hasRunningTask correctly
apps/desktop test:unit: [22m[39m[TaskManager] Executing task task-1. Active tasks: 1
apps/desktop test:unit: [90mstderr[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > [22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > [22m[2mState Query Methods[2m > [22m[2mshould report hasRunningTask correctly
apps/desktop test:unit: [22m[39m[LogWatcher] Error finding latest log: TypeError: Cannot read properties of undefined (reading 'readdir')
apps/desktop test:unit:     at OpenCodeLogWatcher.findAndWatchLatestLog (C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/OpenCodeLogWatcher.ts:174:39)
apps/desktop test:unit:     at OpenCodeLogWatcher.start (C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/OpenCodeLogWatcher.ts:132:16)
apps/desktop test:unit:     at OpenCodeAdapter.startTask (C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/OpenCodeAdapter.ts:194:29)
apps/desktop test:unit:     at C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/TaskManager.ts:310:23
apps/desktop test:unit:     at TaskManager.executeTask (C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/TaskManager.ts:321:5)
apps/desktop test:unit:     at TaskManager.startTask (C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/TaskManager.ts:118:17)
apps/desktop test:unit:     at C:/Users/david/Documents/GitHub/accomplish/apps/desktop/__tests__/unit/main/opencode/task-manager.unit.test.ts:638:9
apps/desktop test:unit:     at file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m.pnpm[24m/@vitest+runner@4.0.17/node_modules/[4m@vitest/runner[24m/dist/index.js:915:20
apps/desktop test:unit: [90mstdout[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > [22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > [22m[2mState Query Methods[2m > [22m[2mshould report hasRunningTask correctly
apps/desktop test:unit: [22m[39m[OpenCode CLI] Starting: opencode 
apps/desktop test:unit: [90mstdout[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > [22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > [22m[2mState Query Methods[2m > [22m[2mshould report hasRunningTask correctly
apps/desktop test:unit: [22m[39m[OpenCode CLI] Command: opencode
apps/desktop test:unit: [OpenCode CLI] Args: 
apps/desktop test:unit: [OpenCode CLI] Working directory: /mock/working-dir
apps/desktop test:unit: [OpenCode CLI] PTY spawn: /bin/sh -c opencode
apps/desktop test:unit: [OpenCode CLI] PTY Process PID: 12345
apps/desktop test:unit: [90mstderr[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > [22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > [22m[2mState Query Methods[2m > [22m[2mshould report hasRunningTask correctly
apps/desktop test:unit: [22m[39m[LogWatcher] Could not watch log directory: TypeError: __vite_ssr_import_1__.default.watch is not a function
apps/desktop test:unit:     at OpenCodeLogWatcher.start (C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/OpenCodeLogWatcher.ts:139:25)
apps/desktop test:unit:     at OpenCodeAdapter.startTask (C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/OpenCodeAdapter.ts:194:7)
apps/desktop test:unit:     at C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/TaskManager.ts:310:9
apps/desktop test:unit: [90mstdout[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > [22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > [22m[2mState Query Methods[2m > [22m[2mshould return all active task IDs
apps/desktop test:unit: [22m[39m[TaskManager] Executing task task-1. Active tasks: 1
apps/desktop test:unit: [90mstderr[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > [22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > [22m[2mState Query Methods[2m > [22m[2mshould return all active task IDs
apps/desktop test:unit: [22m[39m[LogWatcher] Error finding latest log: TypeError: Cannot read properties of undefined (reading 'readdir')
apps/desktop test:unit:     at OpenCodeLogWatcher.findAndWatchLatestLog (C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/OpenCodeLogWatcher.ts:174:39)
apps/desktop test:unit:     at OpenCodeLogWatcher.start (C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/OpenCodeLogWatcher.ts:132:16)
apps/desktop test:unit:     at OpenCodeAdapter.startTask (C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/OpenCodeAdapter.ts:194:29)
apps/desktop test:unit:     at C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/TaskManager.ts:310:23
apps/desktop test:unit:     at TaskManager.executeTask (C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/TaskManager.ts:321:5)
apps/desktop test:unit:     at TaskManager.startTask (C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/TaskManager.ts:118:17)
apps/desktop test:unit:     at C:/Users/david/Documents/GitHub/accomplish/apps/desktop/__tests__/unit/main/opencode/task-manager.unit.test.ts:647:9
apps/desktop test:unit:     at file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m.pnpm[24m/@vitest+runner@4.0.17/node_modules/[4m@vitest/runner[24m/dist/index.js:915:20
apps/desktop test:unit: [90mstdout[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > [22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > [22m[2mState Query Methods[2m > [22m[2mshould return all active task IDs
apps/desktop test:unit: [22m[39m[OpenCode CLI] Starting: opencode 
apps/desktop test:unit: [90mstderr[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > [22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > [22m[2mState Query Methods[2m > [22m[2mshould return all active task IDs
apps/desktop test:unit: [22m[39m[LogWatcher] Could not watch log directory: TypeError: __vite_ssr_import_1__.default.watch is not a function
apps/desktop test:unit:     at OpenCodeLogWatcher.start (C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/OpenCodeLogWatcher.ts:139:25)
apps/desktop test:unit:     at OpenCodeAdapter.startTask (C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/OpenCodeAdapter.ts:194:7)
apps/desktop test:unit:     at C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/TaskManager.ts:310:9
apps/desktop test:unit: [90mstdout[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > [22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > [22m[2mState Query Methods[2m > [22m[2mshould return all active task IDs
apps/desktop test:unit: [22m[39m[OpenCode CLI] Command: opencode
apps/desktop test:unit: [OpenCode CLI] Args: 
apps/desktop test:unit: [OpenCode CLI] Working directory: /mock/working-dir
apps/desktop test:unit: [OpenCode CLI] PTY spawn: /bin/sh -c opencode
apps/desktop test:unit: [OpenCode CLI] PTY Process PID: 12345
apps/desktop test:unit: [TaskManager] Executing task task-2. Active tasks: 2
apps/desktop test:unit: [90mstderr[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > [22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > [22m[2mState Query Methods[2m > [22m[2mshould return all active task IDs
apps/desktop test:unit: [22m[39m[LogWatcher] Error finding latest log: TypeError: Cannot read properties of undefined (reading 'readdir')
apps/desktop test:unit:     at OpenCodeLogWatcher.findAndWatchLatestLog (C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/OpenCodeLogWatcher.ts:174:39)
apps/desktop test:unit:     at OpenCodeLogWatcher.start (C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/OpenCodeLogWatcher.ts:132:16)
apps/desktop test:unit:     at OpenCodeAdapter.startTask (C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/OpenCodeAdapter.ts:194:29)
apps/desktop test:unit:     at C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/TaskManager.ts:310:23
apps/desktop test:unit:     at TaskManager.executeTask (C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/TaskManager.ts:321:5)
apps/desktop test:unit:     at TaskManager.startTask (C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/TaskManager.ts:118:17)
apps/desktop test:unit:     at C:/Users/david/Documents/GitHub/accomplish/apps/desktop/__tests__/unit/main/opencode/task-manager.unit.test.ts:648:9
apps/desktop test:unit:     at file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m.pnpm[24m/@vitest+runner@4.0.17/node_modules/[4m@vitest/runner[24m/dist/index.js:915:20
apps/desktop test:unit: [90mstderr[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > [22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > [22m[2mState Query Methods[2m > [22m[2mshould return all active task IDs
apps/desktop test:unit: [22m[39m[LogWatcher] Could not watch log directory: TypeError: __vite_ssr_import_1__.default.watch is not a function
apps/desktop test:unit:     at OpenCodeLogWatcher.start (C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/OpenCodeLogWatcher.ts:139:25)
apps/desktop test:unit:     at OpenCodeAdapter.startTask (C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/OpenCodeAdapter.ts:194:7)
apps/desktop test:unit:     at C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/TaskManager.ts:310:9
apps/desktop test:unit: [90mstdout[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > [22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > [22m[2mState Query Methods[2m > [22m[2mshould return all active task IDs
apps/desktop test:unit: [22m[39m[OpenCode CLI] Starting: opencode 
apps/desktop test:unit: [90mstdout[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > [22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > [22m[2mState Query Methods[2m > [22m[2mshould return all active task IDs
apps/desktop test:unit: [22m[39m[OpenCode CLI] Command: opencode
apps/desktop test:unit: [OpenCode CLI] Args: 
apps/desktop test:unit: [OpenCode CLI] Working directory: /mock/working-dir
apps/desktop test:unit: [OpenCode CLI] PTY spawn: /bin/sh -c opencode
apps/desktop test:unit: [OpenCode CLI] PTY Process PID: 12345
apps/desktop test:unit: [90mstdout[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > [22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > [22m[2mState Query Methods[2m > [22m[2mshould return first active task ID
apps/desktop test:unit: [22m[39m[TaskManager] Executing task task-1. Active tasks: 1
apps/desktop test:unit: [90mstderr[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > [22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > [22m[2mState Query Methods[2m > [22m[2mshould return first active task ID
apps/desktop test:unit: [22m[39m[LogWatcher] Error finding latest log: TypeError: Cannot read properties of undefined (reading 'readdir')
apps/desktop test:unit:     at OpenCodeLogWatcher.findAndWatchLatestLog (C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/OpenCodeLogWatcher.ts:174:39)
apps/desktop test:unit:     at OpenCodeLogWatcher.start (C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/OpenCodeLogWatcher.ts:132:16)
apps/desktop test:unit:     at OpenCodeAdapter.startTask (C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/OpenCodeAdapter.ts:194:29)
apps/desktop test:unit:     at C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/TaskManager.ts:310:23
apps/desktop test:unit:     at TaskManager.executeTask (C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/TaskManager.ts:321:5)
apps/desktop test:unit:     at TaskManager.startTask (C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/TaskManager.ts:118:17)
apps/desktop test:unit:     at C:/Users/david/Documents/GitHub/accomplish/apps/desktop/__tests__/unit/main/opencode/task-manager.unit.test.ts:662:9
apps/desktop test:unit:     at file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m.pnpm[24m/@vitest+runner@4.0.17/node_modules/[4m@vitest/runner[24m/dist/index.js:915:20
apps/desktop test:unit: [90mstdout[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > [22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > [22m[2mState Query Methods[2m > [22m[2mshould return first active task ID
apps/desktop test:unit: [22m[39m[OpenCode CLI] Starting: opencode 
apps/desktop test:unit: [90mstdout[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > [22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > [22m[2mState Query Methods[2m > [22m[2mshould return first active task ID
apps/desktop test:unit: [22m[39m[OpenCode CLI] Command: opencode
apps/desktop test:unit: [OpenCode CLI] Args: 
apps/desktop test:unit: [OpenCode CLI] Working directory: /mock/working-dir
apps/desktop test:unit: [OpenCode CLI] PTY spawn: /bin/sh -c opencode
apps/desktop test:unit: [OpenCode CLI] PTY Process PID: 12345
apps/desktop test:unit: [90mstderr[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > [22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > [22m[2mState Query Methods[2m > [22m[2mshould return first active task ID
apps/desktop test:unit: [22m[39m[LogWatcher] Could not watch log directory: TypeError: __vite_ssr_import_1__.default.watch is not a function
apps/desktop test:unit:     at OpenCodeLogWatcher.start (C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/OpenCodeLogWatcher.ts:139:25)
apps/desktop test:unit:     at OpenCodeAdapter.startTask (C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/OpenCodeAdapter.ts:194:7)
apps/desktop test:unit:     at C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/TaskManager.ts:310:9
apps/desktop test:unit: [90mstdout[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > [22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > [22m[2mdispose()[2m > [22m[2mshould dispose all active tasks
apps/desktop test:unit: [22m[39m[TaskManager] Executing task task-1. Active tasks: 1
apps/desktop test:unit: [90mstderr[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > [22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > [22m[2mdispose()[2m > [22m[2mshould dispose all active tasks
apps/desktop test:unit: [22m[39m[LogWatcher] Error finding latest log: TypeError: Cannot read properties of undefined (reading 'readdir')
apps/desktop test:unit:     at OpenCodeLogWatcher.findAndWatchLatestLog (C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/OpenCodeLogWatcher.ts:174:39)
apps/desktop test:unit:     at OpenCodeLogWatcher.start (C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/OpenCodeLogWatcher.ts:132:16)
apps/desktop test:unit:     at OpenCodeAdapter.startTask (C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/OpenCodeAdapter.ts:194:29)
apps/desktop test:unit:     at C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/TaskManager.ts:310:23
apps/desktop test:unit:     at TaskManager.executeTask (C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/TaskManager.ts:321:5)
apps/desktop test:unit:     at TaskManager.startTask (C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/TaskManager.ts:118:17)
apps/desktop test:unit:     at C:/Users/david/Documents/GitHub/accomplish/apps/desktop/__tests__/unit/main/opencode/task-manager.unit.test.ts:687:9
apps/desktop test:unit:     at file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m.pnpm[24m/@vitest+runner@4.0.17/node_modules/[4m@vitest/runner[24m/dist/index.js:915:20
apps/desktop test:unit: [90mstderr[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > [22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > [22m[2mdispose()[2m > [22m[2mshould dispose all active tasks
apps/desktop test:unit: [22m[39m[LogWatcher] Could not watch log directory: TypeError: __vite_ssr_import_1__.default.watch is not a function
apps/desktop test:unit:     at OpenCodeLogWatcher.start (C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/OpenCodeLogWatcher.ts:139:25)
apps/desktop test:unit:     at OpenCodeAdapter.startTask (C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/OpenCodeAdapter.ts:194:7)
apps/desktop test:unit:     at C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/TaskManager.ts:310:9
apps/desktop test:unit: [90mstdout[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > [22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > [22m[2mdispose()[2m > [22m[2mshould dispose all active tasks
apps/desktop test:unit: [22m[39m[OpenCode CLI] Starting: opencode 
apps/desktop test:unit: [90mstdout[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > [22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > [22m[2mdispose()[2m > [22m[2mshould dispose all active tasks
apps/desktop test:unit: [22m[39m[OpenCode CLI] Command: opencode
apps/desktop test:unit: [OpenCode CLI] Args: 
apps/desktop test:unit: [OpenCode CLI] Working directory: /mock/working-dir
apps/desktop test:unit: [OpenCode CLI] PTY spawn: /bin/sh -c opencode
apps/desktop test:unit: [OpenCode CLI] PTY Process PID: 12345
apps/desktop test:unit: [TaskManager] Executing task task-2. Active tasks: 2
apps/desktop test:unit: [90mstderr[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > [22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > [22m[2mdispose()[2m > [22m[2mshould dispose all active tasks
apps/desktop test:unit: [22m[39m[LogWatcher] Error finding latest log: TypeError: Cannot read properties of undefined (reading 'readdir')
apps/desktop test:unit:     at OpenCodeLogWatcher.findAndWatchLatestLog (C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/OpenCodeLogWatcher.ts:174:39)
apps/desktop test:unit:     at OpenCodeLogWatcher.start (C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/OpenCodeLogWatcher.ts:132:16)
apps/desktop test:unit:     at OpenCodeAdapter.startTask (C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/OpenCodeAdapter.ts:194:29)
apps/desktop test:unit:     at C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/TaskManager.ts:310:23
apps/desktop test:unit:     at TaskManager.executeTask (C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/TaskManager.ts:321:5)
apps/desktop test:unit:     at TaskManager.startTask (C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/TaskManager.ts:118:17)
apps/desktop test:unit:     at C:/Users/david/Documents/GitHub/accomplish/apps/desktop/__tests__/unit/main/opencode/task-manager.unit.test.ts:688:9
apps/desktop test:unit:     at file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m.pnpm[24m/@vitest+runner@4.0.17/node_modules/[4m@vitest/runner[24m/dist/index.js:915:20
apps/desktop test:unit: [90mstderr[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > [22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > [22m[2mdispose()[2m > [22m[2mshould dispose all active tasks
apps/desktop test:unit: [22m[39m[LogWatcher] Could not watch log directory: TypeError: __vite_ssr_import_1__.default.watch is not a function
apps/desktop test:unit:     at OpenCodeLogWatcher.start (C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/OpenCodeLogWatcher.ts:139:25)
apps/desktop test:unit:     at OpenCodeAdapter.startTask (C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/OpenCodeAdapter.ts:194:7)
apps/desktop test:unit:     at C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/TaskManager.ts:310:9
apps/desktop test:unit: [90mstdout[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > [22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > [22m[2mdispose()[2m > [22m[2mshould dispose all active tasks
apps/desktop test:unit: [22m[39m[OpenCode CLI] Starting: opencode 
apps/desktop test:unit: [TaskManager] Disposing all tasks (2 active, 0 queued)
apps/desktop test:unit: [OpenCode Adapter] Disposing adapter for task task-1
apps/desktop test:unit: [OpenCode Adapter] Adapter disposed
apps/desktop test:unit: [OpenCode Adapter] Disposing adapter for task task-2
apps/desktop test:unit: [OpenCode Adapter] Adapter disposed
apps/desktop test:unit: [TaskManager] All tasks disposed
apps/desktop test:unit: [OpenCode CLI] Command: opencode
apps/desktop test:unit: [OpenCode CLI] Args: 
apps/desktop test:unit: [OpenCode CLI] Working directory: /mock/working-dir
apps/desktop test:unit: [OpenCode CLI] PTY spawn: /bin/sh -c opencode
apps/desktop test:unit: [OpenCode CLI] PTY Process PID: 12345
apps/desktop test:unit: [90mstdout[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > [22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > [22m[2mdispose()[2m > [22m[2mshould clear the task queue
apps/desktop test:unit: [22m[39m[TaskManager] Executing task task-1. Active tasks: 1
apps/desktop test:unit: [90mstderr[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > [22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > [22m[2mdispose()[2m > [22m[2mshould clear the task queue
apps/desktop test:unit: [22m[39m[LogWatcher] Error finding latest log: TypeError: Cannot read properties of undefined (reading 'readdir')
apps/desktop test:unit:     at OpenCodeLogWatcher.findAndWatchLatestLog (C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/OpenCodeLogWatcher.ts:174:39)
apps/desktop test:unit:     at OpenCodeLogWatcher.start (C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/OpenCodeLogWatcher.ts:132:16)
apps/desktop test:unit:     at OpenCodeAdapter.startTask (C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/OpenCodeAdapter.ts:194:29)
apps/desktop test:unit:     at C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/TaskManager.ts:310:23
apps/desktop test:unit:     at TaskManager.executeTask (C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/TaskManager.ts:321:5)
apps/desktop test:unit:     at TaskManager.startTask (C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/TaskManager.ts:118:17)
apps/desktop test:unit:     at C:/Users/david/Documents/GitHub/accomplish/apps/desktop/__tests__/unit/main/opencode/task-manager.unit.test.ts:701:9
apps/desktop test:unit:     at file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m.pnpm[24m/@vitest+runner@4.0.17/node_modules/[4m@vitest/runner[24m/dist/index.js:915:20
apps/desktop test:unit: [90mstderr[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > [22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > [22m[2mdispose()[2m > [22m[2mshould clear the task queue
apps/desktop test:unit: [22m[39m[LogWatcher] Could not watch log directory: TypeError: __vite_ssr_import_1__.default.watch is not a function
apps/desktop test:unit:     at OpenCodeLogWatcher.start (C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/OpenCodeLogWatcher.ts:139:25)
apps/desktop test:unit:     at OpenCodeAdapter.startTask (C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/OpenCodeAdapter.ts:194:7)
apps/desktop test:unit:     at C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/TaskManager.ts:310:9
apps/desktop test:unit: [90mstdout[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > [22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > [22m[2mdispose()[2m > [22m[2mshould clear the task queue
apps/desktop test:unit: [22m[39m[OpenCode CLI] Starting: opencode 
apps/desktop test:unit: [90mstdout[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > [22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > [22m[2mdispose()[2m > [22m[2mshould clear the task queue
apps/desktop test:unit: [22m[39m[OpenCode CLI] Command: opencode
apps/desktop test:unit: [OpenCode CLI] Args: 
apps/desktop test:unit: [OpenCode CLI] Working directory: /mock/working-dir
apps/desktop test:unit: [OpenCode CLI] PTY spawn: /bin/sh -c opencode
apps/desktop test:unit: [OpenCode CLI] PTY Process PID: 12345
apps/desktop test:unit: [TaskManager] At max concurrent tasks (1). Queueing task task-2
apps/desktop test:unit: [TaskManager] Task task-2 queued. Queue length: 1
apps/desktop test:unit: [90mstdout[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > [22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > [22m[2mdispose()[2m > [22m[2mshould clear the task queue
apps/desktop test:unit: [22m[39m[TaskManager] Disposing all tasks (1 active, 1 queued)
apps/desktop test:unit: [OpenCode Adapter] Disposing adapter for task task-1
apps/desktop test:unit: [OpenCode Adapter] Adapter disposed
apps/desktop test:unit: [TaskManager] All tasks disposed
apps/desktop test:unit: [90mstdout[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > [22m[2mTask Manager Module[2m > [22m[2mSingleton Functions[2m > [22m[2mdisposeTaskManager()[2m > [22m[2mshould dispose singleton and allow recreation
apps/desktop test:unit: [22m[39m[TaskManager] Disposing all tasks (0 active, 0 queued)
apps/desktop test:unit: [TaskManager] All tasks disposed
apps/desktop test:unit: [90mstdout[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > [22m[2mTask Manager Module[2m > [22m[2mQueue Processing[2m > [22m[2mshould queue tasks and track positions correctly
apps/desktop test:unit: [22m[39m[TaskManager] Executing task task-1. Active tasks: 1
apps/desktop test:unit: [90mstderr[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > [22m[2mTask Manager Module[2m > [22m[2mQueue Processing[2m > [22m[2mshould queue tasks and track positions correctly
apps/desktop test:unit: [22m[39m[LogWatcher] Error finding latest log: TypeError: Cannot read properties of undefined (reading 'readdir')
apps/desktop test:unit:     at OpenCodeLogWatcher.findAndWatchLatestLog (C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/OpenCodeLogWatcher.ts:174:39)
apps/desktop test:unit:     at OpenCodeLogWatcher.start (C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/OpenCodeLogWatcher.ts:132:16)
apps/desktop test:unit:     at OpenCodeAdapter.startTask (C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/OpenCodeAdapter.ts:194:29)
apps/desktop test:unit:     at C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/TaskManager.ts:310:23
apps/desktop test:unit:     at TaskManager.executeTask (C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/TaskManager.ts:321:5)
apps/desktop test:unit:     at TaskManager.startTask (C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/TaskManager.ts:118:17)
apps/desktop test:unit:     at C:/Users/david/Documents/GitHub/accomplish/apps/desktop/__tests__/unit/main/opencode/task-manager.unit.test.ts:772:7
apps/desktop test:unit:     at file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m.pnpm[24m/@vitest+runner@4.0.17/node_modules/[4m@vitest/runner[24m/dist/index.js:915:20
apps/desktop test:unit: [90mstderr[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > [22m[2mTask Manager Module[2m > [22m[2mQueue Processing[2m > [22m[2mshould queue tasks and track positions correctly
apps/desktop test:unit: [22m[39m[LogWatcher] Could not watch log directory: TypeError: __vite_ssr_import_1__.default.watch is not a function
apps/desktop test:unit:     at OpenCodeLogWatcher.start (C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/OpenCodeLogWatcher.ts:139:25)
apps/desktop test:unit:     at OpenCodeAdapter.startTask (C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/OpenCodeAdapter.ts:194:7)
apps/desktop test:unit:     at C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/TaskManager.ts:310:9
apps/desktop test:unit: [90mstdout[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > [22m[2mTask Manager Module[2m > [22m[2mQueue Processing[2m > [22m[2mshould queue tasks and track positions correctly
apps/desktop test:unit: [22m[39m[OpenCode CLI] Starting: opencode 
apps/desktop test:unit: [90mstdout[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > [22m[2mTask Manager Module[2m > [22m[2mQueue Processing[2m > [22m[2mshould queue tasks and track positions correctly
apps/desktop test:unit: [22m[39m[OpenCode CLI] Command: opencode
apps/desktop test:unit: [OpenCode CLI] Args: 
apps/desktop test:unit: [OpenCode CLI] Working directory: /mock/working-dir
apps/desktop test:unit: [OpenCode CLI] PTY spawn: /bin/sh -c opencode
apps/desktop test:unit: [OpenCode CLI] PTY Process PID: 12345
apps/desktop test:unit: [TaskManager] Executing task task-2. Active tasks: 2
apps/desktop test:unit: [90mstderr[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > [22m[2mTask Manager Module[2m > [22m[2mQueue Processing[2m > [22m[2mshould queue tasks and track positions correctly
apps/desktop test:unit: [22m[39m[LogWatcher] Error finding latest log: TypeError: Cannot read properties of undefined (reading 'readdir')
apps/desktop test:unit:     at OpenCodeLogWatcher.findAndWatchLatestLog (C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/OpenCodeLogWatcher.ts:174:39)
apps/desktop test:unit:     at OpenCodeLogWatcher.start (C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/OpenCodeLogWatcher.ts:132:16)
apps/desktop test:unit:     at OpenCodeAdapter.startTask (C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/OpenCodeAdapter.ts:194:29)
apps/desktop test:unit:     at C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/TaskManager.ts:310:23
apps/desktop test:unit:     at TaskManager.executeTask (C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/TaskManager.ts:321:5)
apps/desktop test:unit:     at TaskManager.startTask (C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/TaskManager.ts:118:17)
apps/desktop test:unit:     at C:/Users/david/Documents/GitHub/accomplish/apps/desktop/__tests__/unit/main/opencode/task-manager.unit.test.ts:773:7
apps/desktop test:unit:     at file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m.pnpm[24m/@vitest+runner@4.0.17/node_modules/[4m@vitest/runner[24m/dist/index.js:915:20
apps/desktop test:unit: [90mstderr[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > [22m[2mTask Manager Module[2m > [22m[2mQueue Processing[2m > [22m[2mshould queue tasks and track positions correctly
apps/desktop test:unit: [22m[39m[LogWatcher] Could not watch log directory: TypeError: __vite_ssr_import_1__.default.watch is not a function
apps/desktop test:unit:     at OpenCodeLogWatcher.start (C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/OpenCodeLogWatcher.ts:139:25)
apps/desktop test:unit:     at OpenCodeAdapter.startTask (C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/OpenCodeAdapter.ts:194:7)
apps/desktop test:unit:     at C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/TaskManager.ts:310:9
apps/desktop test:unit: [90mstdout[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > [22m[2mTask Manager Module[2m > [22m[2mQueue Processing[2m > [22m[2mshould queue tasks and track positions correctly
apps/desktop test:unit: [22m[39m[OpenCode CLI] Starting: opencode 
apps/desktop test:unit: [90mstdout[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > [22m[2mTask Manager Module[2m > [22m[2mQueue Processing[2m > [22m[2mshould queue tasks and track positions correctly
apps/desktop test:unit: [22m[39m[OpenCode CLI] Command: opencode
apps/desktop test:unit: [OpenCode CLI] Args: 
apps/desktop test:unit: [OpenCode CLI] Working directory: /mock/working-dir
apps/desktop test:unit: [OpenCode CLI] PTY spawn: /bin/sh -c opencode
apps/desktop test:unit: [OpenCode CLI] PTY Process PID: 12345
apps/desktop test:unit: [TaskManager] At max concurrent tasks (2). Queueing task task-3
apps/desktop test:unit: [TaskManager] Task task-3 queued. Queue length: 1
apps/desktop test:unit: [90mstdout[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > [22m[2mTask Manager Module[2m > [22m[2mQueue Processing[2m > [22m[2mshould queue tasks and track positions correctly
apps/desktop test:unit: [22m[39m[TaskManager] At max concurrent tasks (2). Queueing task task-4
apps/desktop test:unit: [TaskManager] Task task-4 queued. Queue length: 2
apps/desktop test:unit: [90mstdout[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > [22m[2mTask Manager Module[2m > [22m[2mQueue Processing[2m > [22m[2mshould maintain queue integrity during concurrent operations
apps/desktop test:unit: [22m[39m[TaskManager] Executing task task-1. Active tasks: 1
apps/desktop test:unit: [90mstderr[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > [22m[2mTask Manager Module[2m > [22m[2mQueue Processing[2m > [22m[2mshould maintain queue integrity during concurrent operations
apps/desktop test:unit: [22m[39m[LogWatcher] Error finding latest log: TypeError: Cannot read properties of undefined (reading 'readdir')
apps/desktop test:unit:     at OpenCodeLogWatcher.findAndWatchLatestLog (C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/OpenCodeLogWatcher.ts:174:39)
apps/desktop test:unit:     at OpenCodeLogWatcher.start (C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/OpenCodeLogWatcher.ts:132:16)
apps/desktop test:unit:     at OpenCodeAdapter.startTask (C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/OpenCodeAdapter.ts:194:29)
apps/desktop test:unit:     at C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/TaskManager.ts:310:23
apps/desktop test:unit:     at TaskManager.executeTask (C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/TaskManager.ts:321:5)
apps/desktop test:unit:     at TaskManager.startTask (C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/TaskManager.ts:118:17)
apps/desktop test:unit:     at C:/Users/david/Documents/GitHub/accomplish/apps/desktop/__tests__/unit/main/opencode/task-manager.unit.test.ts:787:7
apps/desktop test:unit:     at file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m.pnpm[24m/@vitest+runner@4.0.17/node_modules/[4m@vitest/runner[24m/dist/index.js:915:20
apps/desktop test:unit: [90mstderr[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > [22m[2mTask Manager Module[2m > [22m[2mQueue Processing[2m > [22m[2mshould maintain queue integrity during concurrent operations
apps/desktop test:unit: [22m[39m[LogWatcher] Could not watch log directory: TypeError: __vite_ssr_import_1__.default.watch is not a function
apps/desktop test:unit:     at OpenCodeLogWatcher.start (C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/OpenCodeLogWatcher.ts:139:25)
apps/desktop test:unit:     at OpenCodeAdapter.startTask (C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/OpenCodeAdapter.ts:194:7)
apps/desktop test:unit:     at C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/TaskManager.ts:310:9
apps/desktop test:unit: [90mstdout[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > [22m[2mTask Manager Module[2m > [22m[2mQueue Processing[2m > [22m[2mshould maintain queue integrity during concurrent operations
apps/desktop test:unit: [22m[39m[OpenCode CLI] Starting: opencode 
apps/desktop test:unit: [90mstdout[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > [22m[2mTask Manager Module[2m > [22m[2mQueue Processing[2m > [22m[2mshould maintain queue integrity during concurrent operations
apps/desktop test:unit: [22m[39m[OpenCode CLI] Command: opencode
apps/desktop test:unit: [OpenCode CLI] Args: 
apps/desktop test:unit: [OpenCode CLI] Working directory: /mock/working-dir
apps/desktop test:unit: [OpenCode CLI] PTY spawn: /bin/sh -c opencode
apps/desktop test:unit: [OpenCode CLI] PTY Process PID: 12345
apps/desktop test:unit: [TaskManager] Executing task task-2. Active tasks: 2
apps/desktop test:unit: [90mstderr[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > [22m[2mTask Manager Module[2m > [22m[2mQueue Processing[2m > [22m[2mshould maintain queue integrity during concurrent operations
apps/desktop test:unit: [22m[39m[LogWatcher] Error finding latest log: TypeError: Cannot read properties of undefined (reading 'readdir')
apps/desktop test:unit:     at OpenCodeLogWatcher.findAndWatchLatestLog (C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/OpenCodeLogWatcher.ts:174:39)
apps/desktop test:unit:     at OpenCodeLogWatcher.start (C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/OpenCodeLogWatcher.ts:132:16)
apps/desktop test:unit:     at OpenCodeAdapter.startTask (C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/OpenCodeAdapter.ts:194:29)
apps/desktop test:unit:     at C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/TaskManager.ts:310:23
apps/desktop test:unit:     at TaskManager.executeTask (C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/TaskManager.ts:321:5)
apps/desktop test:unit:     at TaskManager.startTask (C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/TaskManager.ts:118:17)
apps/desktop test:unit:     at C:/Users/david/Documents/GitHub/accomplish/apps/desktop/__tests__/unit/main/opencode/task-manager.unit.test.ts:788:7
apps/desktop test:unit:     at file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m.pnpm[24m/@vitest+runner@4.0.17/node_modules/[4m@vitest/runner[24m/dist/index.js:915:20
apps/desktop test:unit: [90mstderr[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > [22m[2mTask Manager Module[2m > [22m[2mQueue Processing[2m > [22m[2mshould maintain queue integrity during concurrent operations
apps/desktop test:unit: [22m[39m[LogWatcher] Could not watch log directory: TypeError: __vite_ssr_import_1__.default.watch is not a function
apps/desktop test:unit:     at OpenCodeLogWatcher.start (C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/OpenCodeLogWatcher.ts:139:25)
apps/desktop test:unit:     at OpenCodeAdapter.startTask (C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/OpenCodeAdapter.ts:194:7)
apps/desktop test:unit:     at C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/TaskManager.ts:310:9
apps/desktop test:unit: [90mstdout[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > [22m[2mTask Manager Module[2m > [22m[2mQueue Processing[2m > [22m[2mshould maintain queue integrity during concurrent operations
apps/desktop test:unit: [22m[39m[OpenCode CLI] Starting: opencode 
apps/desktop test:unit: [90mstdout[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > [22m[2mTask Manager Module[2m > [22m[2mQueue Processing[2m > [22m[2mshould maintain queue integrity during concurrent operations
apps/desktop test:unit: [22m[39m[OpenCode CLI] Command: opencode
apps/desktop test:unit: [OpenCode CLI] Args: 
apps/desktop test:unit: [OpenCode CLI] Working directory: /mock/working-dir
apps/desktop test:unit: [OpenCode CLI] PTY spawn: /bin/sh -c opencode
apps/desktop test:unit: [OpenCode CLI] PTY Process PID: 12345
apps/desktop test:unit: [TaskManager] At max concurrent tasks (2). Queueing task task-3
apps/desktop test:unit: [TaskManager] Task task-3 queued. Queue length: 1
apps/desktop test:unit: [90mstdout[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > [22m[2mTask Manager Module[2m > [22m[2mQueue Processing[2m > [22m[2mshould maintain queue integrity during concurrent operations
apps/desktop test:unit: [22m[39m[TaskManager] At max concurrent tasks (2). Queueing task task-4
apps/desktop test:unit: [TaskManager] Task task-4 queued. Queue length: 2
apps/desktop test:unit: [90mstdout[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > [22m[2mTask Manager Module[2m > [22m[2mQueue Processing[2m > [22m[2mshould maintain queue integrity during concurrent operations
apps/desktop test:unit: [22m[39m[TaskManager] Removing task task-3 from queue
apps/desktop test:unit:  [32mÔ£ô[39m [30m[42m unit [49m[39m __tests__/unit/main/opencode/task-manager.unit.test.ts [2m([22m[2m35 tests[22m[2m)[22m[33m 5271[2mms[22m[39m
apps/desktop test:unit:          [33m[2mÔ£ô[22m[39m should create task manager with default max concurrent tasks [33m 4738[2mms[22m[39m
apps/desktop test:unit: [90mstdout[2m | __tests__/unit/main/opencode/auth-browser.unit.test.ts[2m > [22m[2mOAuthBrowserFlow[2m > [22m[2misInProgress()[2m > [22m[2mshould return true when flow is started
apps/desktop test:unit: [22m[39m[agent-core] u2d sync test
apps/desktop test:unit: [90mstdout[2m | __tests__/unit/main/opencode/auth-browser.unit.test.ts[2m > [22m[2mOAuthBrowserFlow[2m > [22m[2misInProgress()[2m > [22m[2mshould return true when flow is started
apps/desktop test:unit: [22m[39m[CLI Resolver] Using local OpenCode CLI executable: \mock\app\path\node_modules\opencode-windows-x64\bin\opencode.exe
apps/desktop test:unit: [90mstdout[2m | __tests__/unit/main/opencode/auth-browser.unit.test.ts[2m > [22m[2mOAuthBrowserFlow[2m > [22m[2misInProgress()[2m > [22m[2mshould return false after flow completes
apps/desktop test:unit: [22m[39m[agent-core] u2d sync test
apps/desktop test:unit: [90mstdout[2m | __tests__/unit/main/opencode/auth-browser.unit.test.ts[2m > [22m[2mOAuthBrowserFlow[2m > [22m[2misInProgress()[2m > [22m[2mshould return false after flow completes
apps/desktop test:unit: [22m[39m[CLI Resolver] Using local OpenCode CLI executable: \mock\app\path\node_modules\opencode-windows-x64\bin\opencode.exe
apps/desktop test:unit: [90mstdout[2m | __tests__/unit/main/opencode/auth-browser.unit.test.ts[2m > [22m[2mOAuthBrowserFlow[2m > [22m[2mstart()[2m > [22m[2mshould spawn PTY with auth login command
apps/desktop test:unit: [22m[39m[agent-core] u2d sync test
apps/desktop test:unit: [90mstdout[2m | __tests__/unit/main/opencode/auth-browser.unit.test.ts[2m > [22m[2mOAuthBrowserFlow[2m > [22m[2mstart()[2m > [22m[2mshould spawn PTY with auth login command
apps/desktop test:unit: [22m[39m[CLI Resolver] Using local OpenCode CLI executable: \mock\app\path\node_modules\opencode-windows-x64\bin\opencode.exe
apps/desktop test:unit: [90mstderr[2m | __tests__/unit/main/ipc/handlers.unit.test.ts[2m > [22m[2mIPC Handlers Integration[2m > [22m[2mAPI Key Handlers[2m > [22m[2mapi-key:set should reject empty keys
apps/desktop test:unit: [22m[39mIPC handler api-key:set failed Error: apiKey is required
apps/desktop test:unit:     at C:/Users/david/Documents/GitHub/accomplish/apps/desktop/__tests__/unit/main/ipc/handlers.unit.test.ts:266:15
apps/desktop test:unit:     at Mock (file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m.pnpm[24m/@vitest+spy@4.0.17/node_modules/[4m@vitest/spy[24m/dist/index.js:285:34)
apps/desktop test:unit:     at C:/Users/david/Documents/GitHub/accomplish/apps/desktop/src/main/ipc/handlers.ts:467:26
apps/desktop test:unit:     at C:/Users/david/Documents/GitHub/accomplish/apps/desktop/src/main/ipc/handlers.ts:133:20
apps/desktop test:unit:     at invokeHandler (C:/Users/david/Documents/GitHub/accomplish/apps/desktop/__tests__/unit/main/ipc/handlers.unit.test.ts:395:10)
apps/desktop test:unit:     at C:/Users/david/Documents/GitHub/accomplish/apps/desktop/__tests__/unit/main/ipc/handlers.unit.test.ts:544:20
apps/desktop test:unit:     at file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m.pnpm[24m/@vitest+runner@4.0.17/node_modules/[4m@vitest/runner[24m/dist/index.js:145:11
apps/desktop test:unit:     at file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m.pnpm[24m/@vitest+runner@4.0.17/node_modules/[4m@vitest/runner[24m/dist/index.js:915:26
apps/desktop test:unit:     at file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m.pnpm[24m/@vitest+runner@4.0.17/node_modules/[4m@vitest/runner[24m/dist/index.js:1243:20
apps/desktop test:unit:     at new Promise (<anonymous>)
apps/desktop test:unit: [90mstdout[2m | __tests__/unit/main/opencode/auth-browser.unit.test.ts[2m > [22m[2mOAuthBrowserFlow[2m > [22m[2mstart()[2m > [22m[2mshould auto-select OpenAI provider when prompt detected
apps/desktop test:unit: [22m[39m[agent-core] u2d sync test
apps/desktop test:unit: [90mstderr[2m | __tests__/unit/main/ipc/handlers.unit.test.ts[2m > [22m[2mIPC Handlers Integration[2m > [22m[2mAPI Key Handlers[2m > [22m[2mapi-key:set should reject empty keys
apps/desktop test:unit: [22m[39mIPC handler api-key:set failed Error: apiKey is required
apps/desktop test:unit:     at C:/Users/david/Documents/GitHub/accomplish/apps/desktop/__tests__/unit/main/ipc/handlers.unit.test.ts:266:15
apps/desktop test:unit:     at Mock (file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m.pnpm[24m/@vitest+spy@4.0.17/node_modules/[4m@vitest/spy[24m/dist/index.js:285:34)
apps/desktop test:unit:     at C:/Users/david/Documents/GitHub/accomplish/apps/desktop/src/main/ipc/handlers.ts:467:26
apps/desktop test:unit:     at C:/Users/david/Documents/GitHub/accomplish/apps/desktop/src/main/ipc/handlers.ts:133:20
apps/desktop test:unit:     at invokeHandler (C:/Users/david/Documents/GitHub/accomplish/apps/desktop/__tests__/unit/main/ipc/handlers.unit.test.ts:395:10)
apps/desktop test:unit:     at C:/Users/david/Documents/GitHub/accomplish/apps/desktop/__tests__/unit/main/ipc/handlers.unit.test.ts:545:20
apps/desktop test:unit: [90m    at processTicksAndRejections (node:internal/process/task_queues:103:5)[39m
apps/desktop test:unit:     at file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m.pnpm[24m/@vitest+runner@4.0.17/node_modules/[4m@vitest/runner[24m/dist/index.js:915:20
apps/desktop test:unit: [90mstdout[2m | __tests__/unit/main/opencode/auth-browser.unit.test.ts[2m > [22m[2mOAuthBrowserFlow[2m > [22m[2mstart()[2m > [22m[2mshould auto-select OpenAI provider when prompt detected
apps/desktop test:unit: [22m[39m[CLI Resolver] Using local OpenCode CLI executable: \mock\app\path\node_modules\opencode-windows-x64\bin\opencode.exe
apps/desktop test:unit: [90mstderr[2m | __tests__/unit/main/ipc/handlers.unit.test.ts[2m > [22m[2mIPC Handlers Integration[2m > [22m[2mAPI Key Handlers[2m > [22m[2mapi-key:set should reject keys exceeding max length
apps/desktop test:unit: [22m[39mIPC handler api-key:set failed Error: apiKey exceeds maximum length of 256
apps/desktop test:unit:     at C:/Users/david/Documents/GitHub/accomplish/apps/desktop/__tests__/unit/main/ipc/handlers.unit.test.ts:269:15
apps/desktop test:unit:     at Mock (file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m.pnpm[24m/@vitest+spy@4.0.17/node_modules/[4m@vitest/spy[24m/dist/index.js:285:34)
apps/desktop test:unit:     at C:/Users/david/Documents/GitHub/accomplish/apps/desktop/src/main/ipc/handlers.ts:467:26
apps/desktop test:unit:     at C:/Users/david/Documents/GitHub/accomplish/apps/desktop/src/main/ipc/handlers.ts:133:20
apps/desktop test:unit:     at invokeHandler (C:/Users/david/Documents/GitHub/accomplish/apps/desktop/__tests__/unit/main/ipc/handlers.unit.test.ts:395:10)
apps/desktop test:unit:     at C:/Users/david/Documents/GitHub/accomplish/apps/desktop/__tests__/unit/main/ipc/handlers.unit.test.ts:553:20
apps/desktop test:unit:     at file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m.pnpm[24m/@vitest+runner@4.0.17/node_modules/[4m@vitest/runner[24m/dist/index.js:145:11
apps/desktop test:unit:     at file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m.pnpm[24m/@vitest+runner@4.0.17/node_modules/[4m@vitest/runner[24m/dist/index.js:915:26
apps/desktop test:unit:     at file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m.pnpm[24m/@vitest+runner@4.0.17/node_modules/[4m@vitest/runner[24m/dist/index.js:1243:20
apps/desktop test:unit:     at new Promise (<anonymous>)
apps/desktop test:unit: [90mstderr[2m | __tests__/unit/main/ipc/handlers.unit.test.ts[2m > [22m[2mIPC Handlers Integration[2m > [22m[2mSettings Handlers[2m > [22m[2msettings:set-debug-mode should reject non-boolean values
apps/desktop test:unit: [22m[39mIPC handler settings:set-debug-mode failed Error: Invalid debug mode flag
apps/desktop test:unit:     at C:/Users/david/Documents/GitHub/accomplish/apps/desktop/src/main/ipc/handlers.ts:937:13
apps/desktop test:unit:     at C:/Users/david/Documents/GitHub/accomplish/apps/desktop/src/main/ipc/handlers.ts:133:20
apps/desktop test:unit:     at invokeHandler (C:/Users/david/Documents/GitHub/accomplish/apps/desktop/__tests__/unit/main/ipc/handlers.unit.test.ts:395:10)
apps/desktop test:unit:     at C:/Users/david/Documents/GitHub/accomplish/apps/desktop/__tests__/unit/main/ipc/handlers.unit.test.ts:587:20
apps/desktop test:unit:     at file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m.pnpm[24m/@vitest+runner@4.0.17/node_modules/[4m@vitest/runner[24m/dist/index.js:145:11
apps/desktop test:unit:     at file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m.pnpm[24m/@vitest+runner@4.0.17/node_modules/[4m@vitest/runner[24m/dist/index.js:915:26
apps/desktop test:unit:     at file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m.pnpm[24m/@vitest+runner@4.0.17/node_modules/[4m@vitest/runner[24m/dist/index.js:1243:20
apps/desktop test:unit:     at new Promise (<anonymous>)
apps/desktop test:unit:     at runWithTimeout (file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m.pnpm[24m/@vitest+runner@4.0.17/node_modules/[4m@vitest/runner[24m/dist/index.js:1209:10)
apps/desktop test:unit:     at file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m.pnpm[24m/@vitest+runner@4.0.17/node_modules/[4m@vitest/runner[24m/dist/index.js:1653:37
apps/desktop test:unit: [90mstderr[2m | __tests__/unit/main/ipc/handlers.unit.test.ts[2m > [22m[2mIPC Handlers Integration[2m > [22m[2mSettings Handlers[2m > [22m[2msettings:set-debug-mode should reject non-boolean values
apps/desktop test:unit: [22m[39mIPC handler settings:set-debug-mode failed Error: Invalid debug mode flag
apps/desktop test:unit:     at C:/Users/david/Documents/GitHub/accomplish/apps/desktop/src/main/ipc/handlers.ts:937:13
apps/desktop test:unit:     at C:/Users/david/Documents/GitHub/accomplish/apps/desktop/src/main/ipc/handlers.ts:133:20
apps/desktop test:unit:     at invokeHandler (C:/Users/david/Documents/GitHub/accomplish/apps/desktop/__tests__/unit/main/ipc/handlers.unit.test.ts:395:10)
apps/desktop test:unit:     at C:/Users/david/Documents/GitHub/accomplish/apps/desktop/__tests__/unit/main/ipc/handlers.unit.test.ts:590:20
apps/desktop test:unit: [90m    at processTicksAndRejections (node:internal/process/task_queues:103:5)[39m
apps/desktop test:unit:     at file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m.pnpm[24m/@vitest+runner@4.0.17/node_modules/[4m@vitest/runner[24m/dist/index.js:915:20
apps/desktop test:unit: [90mstderr[2m | __tests__/unit/main/ipc/handlers.unit.test.ts[2m > [22m[2mIPC Handlers Integration[2m > [22m[2mSettings Handlers[2m > [22m[2msettings:add-api-key should reject unsupported providers
apps/desktop test:unit: [22m[39mIPC handler settings:add-api-key failed Error: Unsupported API key provider
apps/desktop test:unit:     at C:/Users/david/Documents/GitHub/accomplish/apps/desktop/src/main/ipc/handlers.ts:437:15
apps/desktop test:unit:     at C:/Users/david/Documents/GitHub/accomplish/apps/desktop/src/main/ipc/handlers.ts:133:20
apps/desktop test:unit:     at invokeHandler (C:/Users/david/Documents/GitHub/accomplish/apps/desktop/__tests__/unit/main/ipc/handlers.unit.test.ts:395:10)
apps/desktop test:unit:     at C:/Users/david/Documents/GitHub/accomplish/apps/desktop/__tests__/unit/main/ipc/handlers.unit.test.ts:662:9
apps/desktop test:unit:     at file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m.pnpm[24m/@vitest+runner@4.0.17/node_modules/[4m@vitest/runner[24m/dist/index.js:145:11
apps/desktop test:unit:     at file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m.pnpm[24m/@vitest+runner@4.0.17/node_modules/[4m@vitest/runner[24m/dist/index.js:915:26
apps/desktop test:unit:     at file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m.pnpm[24m/@vitest+runner@4.0.17/node_modules/[4m@vitest/runner[24m/dist/index.js:1243:20
apps/desktop test:unit:     at new Promise (<anonymous>)
apps/desktop test:unit:     at runWithTimeout (file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m.pnpm[24m/@vitest+runner@4.0.17/node_modules/[4m@vitest/runner[24m/dist/index.js:1209:10)
apps/desktop test:unit:     at file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m.pnpm[24m/@vitest+runner@4.0.17/node_modules/[4m@vitest/runner[24m/dist/index.js:1653:37
apps/desktop test:unit: [90mstdout[2m | __tests__/unit/main/opencode/auth-browser.unit.test.ts[2m > [22m[2mOAuthBrowserFlow[2m > [22m[2mstart()[2m > [22m[2mshould auto-select login method when prompt detected
apps/desktop test:unit: [22m[39m[agent-core] u2d sync test
apps/desktop test:unit: [90mstderr[2m | __tests__/unit/main/ipc/handlers.unit.test.ts[2m > [22m[2mIPC Handlers Integration[2m > [22m[2mTask Handlers[2m > [22m[2mtask:start should validate task config
apps/desktop test:unit: [22m[39mIPC handler task:start failed Error: prompt is required
apps/desktop test:unit:     at sanitizeString (C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/utils/sanitize.ts:13:11)
apps/desktop test:unit:     at validateTaskConfig (C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/utils/task-validation.ts:12:18)
apps/desktop test:unit:     at C:/Users/david/Documents/GitHub/accomplish/apps/desktop/src/main/ipc/handlers.ts:150:29
apps/desktop test:unit:     at C:/Users/david/Documents/GitHub/accomplish/apps/desktop/src/main/ipc/handlers.ts:133:20
apps/desktop test:unit:     at invokeHandler (C:/Users/david/Documents/GitHub/accomplish/apps/desktop/__tests__/unit/main/ipc/handlers.unit.test.ts:395:10)
apps/desktop test:unit:     at C:/Users/david/Documents/GitHub/accomplish/apps/desktop/__tests__/unit/main/ipc/handlers.unit.test.ts:716:20
apps/desktop test:unit:     at file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m.pnpm[24m/@vitest+runner@4.0.17/node_modules/[4m@vitest/runner[24m/dist/index.js:145:11
apps/desktop test:unit:     at file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m.pnpm[24m/@vitest+runner@4.0.17/node_modules/[4m@vitest/runner[24m/dist/index.js:915:26
apps/desktop test:unit:     at file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m.pnpm[24m/@vitest+runner@4.0.17/node_modules/[4m@vitest/runner[24m/dist/index.js:1243:20
apps/desktop test:unit:     at new Promise (<anonymous>)
apps/desktop test:unit: [90mstderr[2m | __tests__/unit/main/ipc/handlers.unit.test.ts[2m > [22m[2mIPC Handlers Integration[2m > [22m[2mTask Handlers[2m > [22m[2mtask:start should validate task config
apps/desktop test:unit: [22m[39mIPC handler task:start failed Error: prompt is required
apps/desktop test:unit:     at sanitizeString (C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/utils/sanitize.ts:13:11)
apps/desktop test:unit:     at validateTaskConfig (C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/utils/task-validation.ts:12:18)
apps/desktop test:unit:     at C:/Users/david/Documents/GitHub/accomplish/apps/desktop/src/main/ipc/handlers.ts:150:29
apps/desktop test:unit:     at C:/Users/david/Documents/GitHub/accomplish/apps/desktop/src/main/ipc/handlers.ts:133:20
apps/desktop test:unit:     at invokeHandler (C:/Users/david/Documents/GitHub/accomplish/apps/desktop/__tests__/unit/main/ipc/handlers.unit.test.ts:395:10)
apps/desktop test:unit:     at C:/Users/david/Documents/GitHub/accomplish/apps/desktop/__tests__/unit/main/ipc/handlers.unit.test.ts:717:20
apps/desktop test:unit: [90m    at processTicksAndRejections (node:internal/process/task_queues:103:5)[39m
apps/desktop test:unit:     at file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m.pnpm[24m/@vitest+runner@4.0.17/node_modules/[4m@vitest/runner[24m/dist/index.js:915:20
apps/desktop test:unit: [90mstdout[2m | __tests__/unit/main/opencode/auth-browser.unit.test.ts[2m > [22m[2mOAuthBrowserFlow[2m > [22m[2mstart()[2m > [22m[2mshould auto-select login method when prompt detected
apps/desktop test:unit: [22m[39m[CLI Resolver] Using local OpenCode CLI executable: \mock\app\path\node_modules\opencode-windows-x64\bin\opencode.exe
apps/desktop test:unit: [90mstdout[2m | __tests__/unit/main/opencode/auth-browser.unit.test.ts[2m > [22m[2mOAuthBrowserFlow[2m > [22m[2mstart()[2m > [22m[2mshould open OAuth URL in external browser
apps/desktop test:unit: [22m[39m[agent-core] u2d sync test
apps/desktop test:unit: [90mstdout[2m | __tests__/unit/main/opencode/auth-browser.unit.test.ts[2m > [22m[2mOAuthBrowserFlow[2m > [22m[2mstart()[2m > [22m[2mshould open OAuth URL in external browser
apps/desktop test:unit: [22m[39m[CLI Resolver] Using local OpenCode CLI executable: \mock\app\path\node_modules\opencode-windows-x64\bin\opencode.exe
apps/desktop test:unit: [90mstderr[2m | __tests__/unit/main/ipc/handlers.unit.test.ts[2m > [22m[2mIPC Handlers Integration[2m > [22m[2mPermission Handlers[2m > [22m[2mpermission:respond should skip response for inactive task
apps/desktop test:unit: [22m[39m[IPC] Permission response for inactive task task_inactive
apps/desktop test:unit: [90mstderr[2m | __tests__/unit/main/ipc/handlers.unit.test.ts[2m > [22m[2mIPC Handlers Integration[2m > [22m[2mModel Handlers[2m > [22m[2mmodel:set should reject invalid model configuration
apps/desktop test:unit: [22m[39mIPC handler model:set failed Error: Invalid model configuration
apps/desktop test:unit:     at C:/Users/david/Documents/GitHub/accomplish/apps/desktop/src/main/ipc/handlers.ts:671:13
apps/desktop test:unit:     at C:/Users/david/Documents/GitHub/accomplish/apps/desktop/src/main/ipc/handlers.ts:133:20
apps/desktop test:unit:     at invokeHandler (C:/Users/david/Documents/GitHub/accomplish/apps/desktop/__tests__/unit/main/ipc/handlers.unit.test.ts:395:10)
apps/desktop test:unit:     at C:/Users/david/Documents/GitHub/accomplish/apps/desktop/__tests__/unit/main/ipc/handlers.unit.test.ts:1067:20
apps/desktop test:unit:     at file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m.pnpm[24m/@vitest+runner@4.0.17/node_modules/[4m@vitest/runner[24m/dist/index.js:145:11
apps/desktop test:unit:     at file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m.pnpm[24m/@vitest+runner@4.0.17/node_modules/[4m@vitest/runner[24m/dist/index.js:915:26
apps/desktop test:unit:     at file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m.pnpm[24m/@vitest+runner@4.0.17/node_modules/[4m@vitest/runner[24m/dist/index.js:1243:20
apps/desktop test:unit:     at new Promise (<anonymous>)
apps/desktop test:unit:     at runWithTimeout (file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m.pnpm[24m/@vitest+runner@4.0.17/node_modules/[4m@vitest/runner[24m/dist/index.js:1209:10)
apps/desktop test:unit:     at file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m.pnpm[24m/@vitest+runner@4.0.17/node_modules/[4m@vitest/runner[24m/dist/index.js:1653:37
apps/desktop test:unit: [90mstderr[2m | __tests__/unit/main/ipc/handlers.unit.test.ts[2m > [22m[2mIPC Handlers Integration[2m > [22m[2mModel Handlers[2m > [22m[2mmodel:set should reject invalid model configuration
apps/desktop test:unit: [22m[39mIPC handler model:set failed Error: Invalid model configuration
apps/desktop test:unit:     at C:/Users/david/Documents/GitHub/accomplish/apps/desktop/src/main/ipc/handlers.ts:671:13
apps/desktop test:unit:     at C:/Users/david/Documents/GitHub/accomplish/apps/desktop/src/main/ipc/handlers.ts:133:20
apps/desktop test:unit:     at invokeHandler (C:/Users/david/Documents/GitHub/accomplish/apps/desktop/__tests__/unit/main/ipc/handlers.unit.test.ts:395:10)
apps/desktop test:unit:     at C:/Users/david/Documents/GitHub/accomplish/apps/desktop/__tests__/unit/main/ipc/handlers.unit.test.ts:1068:20
apps/desktop test:unit: [90m    at processTicksAndRejections (node:internal/process/task_queues:103:5)[39m
apps/desktop test:unit:     at file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m.pnpm[24m/@vitest+runner@4.0.17/node_modules/[4m@vitest/runner[24m/dist/index.js:915:20
apps/desktop test:unit: [90mstderr[2m | __tests__/unit/main/ipc/handlers.unit.test.ts[2m > [22m[2mIPC Handlers Integration[2m > [22m[2mModel Handlers[2m > [22m[2mmodel:set should reject invalid model configuration
apps/desktop test:unit: [22m[39mIPC handler model:set failed Error: Invalid model configuration
apps/desktop test:unit:     at C:/Users/david/Documents/GitHub/accomplish/apps/desktop/src/main/ipc/handlers.ts:671:13
apps/desktop test:unit:     at C:/Users/david/Documents/GitHub/accomplish/apps/desktop/src/main/ipc/handlers.ts:133:20
apps/desktop test:unit:     at invokeHandler (C:/Users/david/Documents/GitHub/accomplish/apps/desktop/__tests__/unit/main/ipc/handlers.unit.test.ts:395:10)
apps/desktop test:unit:     at C:/Users/david/Documents/GitHub/accomplish/apps/desktop/__tests__/unit/main/ipc/handlers.unit.test.ts:1071:20
apps/desktop test:unit: [90m    at processTicksAndRejections (node:internal/process/task_queues:103:5)[39m
apps/desktop test:unit:     at file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m.pnpm[24m/@vitest+runner@4.0.17/node_modules/[4m@vitest/runner[24m/dist/index.js:915:20
apps/desktop test:unit: [90mstderr[2m | __tests__/unit/main/ipc/handlers.unit.test.ts[2m > [22m[2mIPC Handlers Integration[2m > [22m[2mShell Handlers[2m > [22m[2mshell:open-external should reject non-http/https protocols
apps/desktop test:unit: [22m[39mFailed to open external URL: Error: External URL must use http or https protocol
apps/desktop test:unit:     at validateHttpUrl (C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/utils/url.ts:5:13)
apps/desktop test:unit:     at C:/Users/david/Documents/GitHub/accomplish/apps/desktop/src/main/ipc/handlers.ts:1020:7
apps/desktop test:unit:     at C:/Users/david/Documents/GitHub/accomplish/apps/desktop/src/main/ipc/handlers.ts:133:20
apps/desktop test:unit:     at invokeHandler (C:/Users/david/Documents/GitHub/accomplish/apps/desktop/__tests__/unit/main/ipc/handlers.unit.test.ts:395:10)
apps/desktop test:unit:     at C:/Users/david/Documents/GitHub/accomplish/apps/desktop/__tests__/unit/main/ipc/handlers.unit.test.ts:1106:20
apps/desktop test:unit:     at file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m.pnpm[24m/@vitest+runner@4.0.17/node_modules/[4m@vitest/runner[24m/dist/index.js:145:11
apps/desktop test:unit:     at file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m.pnpm[24m/@vitest+runner@4.0.17/node_modules/[4m@vitest/runner[24m/dist/index.js:915:26
apps/desktop test:unit:     at file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m.pnpm[24m/@vitest+runner@4.0.17/node_modules/[4m@vitest/runner[24m/dist/index.js:1243:20
apps/desktop test:unit:     at new Promise (<anonymous>)
apps/desktop test:unit:     at runWithTimeout (file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m.pnpm[24m/@vitest+runner@4.0.17/node_modules/[4m@vitest/runner[24m/dist/index.js:1209:10)
apps/desktop test:unit: [90mstderr[2m | __tests__/unit/main/ipc/handlers.unit.test.ts[2m > [22m[2mIPC Handlers Integration[2m > [22m[2mShell Handlers[2m > [22m[2mshell:open-external should reject non-http/https protocols
apps/desktop test:unit: [22m[39mIPC handler shell:open-external failed Error: External URL must use http or https protocol
apps/desktop test:unit:     at validateHttpUrl (C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/utils/url.ts:5:13)
apps/desktop test:unit:     at C:/Users/david/Documents/GitHub/accomplish/apps/desktop/src/main/ipc/handlers.ts:1020:7
apps/desktop test:unit:     at C:/Users/david/Documents/GitHub/accomplish/apps/desktop/src/main/ipc/handlers.ts:133:20
apps/desktop test:unit:     at invokeHandler (C:/Users/david/Documents/GitHub/accomplish/apps/desktop/__tests__/unit/main/ipc/handlers.unit.test.ts:395:10)
apps/desktop test:unit:     at C:/Users/david/Documents/GitHub/accomplish/apps/desktop/__tests__/unit/main/ipc/handlers.unit.test.ts:1106:20
apps/desktop test:unit:     at file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m.pnpm[24m/@vitest+runner@4.0.17/node_modules/[4m@vitest/runner[24m/dist/index.js:145:11
apps/desktop test:unit:     at file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m.pnpm[24m/@vitest+runner@4.0.17/node_modules/[4m@vitest/runner[24m/dist/index.js:915:26
apps/desktop test:unit:     at file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m.pnpm[24m/@vitest+runner@4.0.17/node_modules/[4m@vitest/runner[24m/dist/index.js:1243:20
apps/desktop test:unit:     at new Promise (<anonymous>)
apps/desktop test:unit:     at runWithTimeout (file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m.pnpm[24m/@vitest+runner@4.0.17/node_modules/[4m@vitest/runner[24m/dist/index.js:1209:10)
apps/desktop test:unit: [90mstdout[2m | __tests__/unit/main/opencode/auth-browser.unit.test.ts[2m > [22m[2mOAuthBrowserFlow[2m > [22m[2mstart()[2m > [22m[2mshould not open URL twice
apps/desktop test:unit: [22m[39m[agent-core] u2d sync test
apps/desktop test:unit: [90mstderr[2m | __tests__/unit/main/ipc/handlers.unit.test.ts[2m > [22m[2mIPC Handlers Integration[2m > [22m[2mShell Handlers[2m > [22m[2mshell:open-external should reject non-http/https protocols
apps/desktop test:unit: [22m[39mFailed to open external URL: Error: External URL must use http or https protocol
apps/desktop test:unit:     at validateHttpUrl (C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/utils/url.ts:5:13)
apps/desktop test:unit:     at C:/Users/david/Documents/GitHub/accomplish/apps/desktop/src/main/ipc/handlers.ts:1020:7
apps/desktop test:unit:     at C:/Users/david/Documents/GitHub/accomplish/apps/desktop/src/main/ipc/handlers.ts:133:20
apps/desktop test:unit:     at invokeHandler (C:/Users/david/Documents/GitHub/accomplish/apps/desktop/__tests__/unit/main/ipc/handlers.unit.test.ts:395:10)
apps/desktop test:unit:     at C:/Users/david/Documents/GitHub/accomplish/apps/desktop/__tests__/unit/main/ipc/handlers.unit.test.ts:1109:20
apps/desktop test:unit: [90m    at processTicksAndRejections (node:internal/process/task_queues:103:5)[39m
apps/desktop test:unit:     at file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m.pnpm[24m/@vitest+runner@4.0.17/node_modules/[4m@vitest/runner[24m/dist/index.js:915:20
apps/desktop test:unit: [90mstderr[2m | __tests__/unit/main/ipc/handlers.unit.test.ts[2m > [22m[2mIPC Handlers Integration[2m > [22m[2mShell Handlers[2m > [22m[2mshell:open-external should reject non-http/https protocols
apps/desktop test:unit: [22m[39mIPC handler shell:open-external failed Error: External URL must use http or https protocol
apps/desktop test:unit:     at validateHttpUrl (C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/utils/url.ts:5:13)
apps/desktop test:unit:     at C:/Users/david/Documents/GitHub/accomplish/apps/desktop/src/main/ipc/handlers.ts:1020:7
apps/desktop test:unit:     at C:/Users/david/Documents/GitHub/accomplish/apps/desktop/src/main/ipc/handlers.ts:133:20
apps/desktop test:unit:     at invokeHandler (C:/Users/david/Documents/GitHub/accomplish/apps/desktop/__tests__/unit/main/ipc/handlers.unit.test.ts:395:10)
apps/desktop test:unit:     at C:/Users/david/Documents/GitHub/accomplish/apps/desktop/__tests__/unit/main/ipc/handlers.unit.test.ts:1109:20
apps/desktop test:unit: [90m    at processTicksAndRejections (node:internal/process/task_queues:103:5)[39m
apps/desktop test:unit:     at file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m.pnpm[24m/@vitest+runner@4.0.17/node_modules/[4m@vitest/runner[24m/dist/index.js:915:20
apps/desktop test:unit: [90mstdout[2m | __tests__/unit/main/opencode/auth-browser.unit.test.ts[2m > [22m[2mOAuthBrowserFlow[2m > [22m[2mstart()[2m > [22m[2mshould not open URL twice
apps/desktop test:unit: [22m[39m[CLI Resolver] Using local OpenCode CLI executable: \mock\app\path\node_modules\opencode-windows-x64\bin\opencode.exe
apps/desktop test:unit: [90mstderr[2m | __tests__/unit/main/ipc/handlers.unit.test.ts[2m > [22m[2mIPC Handlers Integration[2m > [22m[2mShell Handlers[2m > [22m[2mshell:open-external should reject invalid URLs
apps/desktop test:unit: [22m[39mFailed to open external URL: Error: External URL is not a valid URL
apps/desktop test:unit:     at validateHttpUrl (C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/utils/url.ts:12:11)
apps/desktop test:unit:     at C:/Users/david/Documents/GitHub/accomplish/apps/desktop/src/main/ipc/handlers.ts:1020:7
apps/desktop test:unit:     at C:/Users/david/Documents/GitHub/accomplish/apps/desktop/src/main/ipc/handlers.ts:133:20
apps/desktop test:unit:     at invokeHandler (C:/Users/david/Documents/GitHub/accomplish/apps/desktop/__tests__/unit/main/ipc/handlers.unit.test.ts:395:10)
apps/desktop test:unit:     at C:/Users/david/Documents/GitHub/accomplish/apps/desktop/__tests__/unit/main/ipc/handlers.unit.test.ts:1116:20
apps/desktop test:unit:     at file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m.pnpm[24m/@vitest+runner@4.0.17/node_modules/[4m@vitest/runner[24m/dist/index.js:145:11
apps/desktop test:unit:     at file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m.pnpm[24m/@vitest+runner@4.0.17/node_modules/[4m@vitest/runner[24m/dist/index.js:915:26
apps/desktop test:unit:     at file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m.pnpm[24m/@vitest+runner@4.0.17/node_modules/[4m@vitest/runner[24m/dist/index.js:1243:20
apps/desktop test:unit:     at new Promise (<anonymous>)
apps/desktop test:unit:     at runWithTimeout (file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m.pnpm[24m/@vitest+runner@4.0.17/node_modules/[4m@vitest/runner[24m/dist/index.js:1209:10)
apps/desktop test:unit: [90mstderr[2m | __tests__/unit/main/ipc/handlers.unit.test.ts[2m > [22m[2mIPC Handlers Integration[2m > [22m[2mShell Handlers[2m > [22m[2mshell:open-external should reject invalid URLs
apps/desktop test:unit: [22m[39mIPC handler shell:open-external failed Error: External URL is not a valid URL
apps/desktop test:unit:     at validateHttpUrl (C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/utils/url.ts:12:11)
apps/desktop test:unit:     at C:/Users/david/Documents/GitHub/accomplish/apps/desktop/src/main/ipc/handlers.ts:1020:7
apps/desktop test:unit:     at C:/Users/david/Documents/GitHub/accomplish/apps/desktop/src/main/ipc/handlers.ts:133:20
apps/desktop test:unit:     at invokeHandler (C:/Users/david/Documents/GitHub/accomplish/apps/desktop/__tests__/unit/main/ipc/handlers.unit.test.ts:395:10)
apps/desktop test:unit:     at C:/Users/david/Documents/GitHub/accomplish/apps/desktop/__tests__/unit/main/ipc/handlers.unit.test.ts:1116:20
apps/desktop test:unit:     at file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m.pnpm[24m/@vitest+runner@4.0.17/node_modules/[4m@vitest/runner[24m/dist/index.js:145:11
apps/desktop test:unit:     at file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m.pnpm[24m/@vitest+runner@4.0.17/node_modules/[4m@vitest/runner[24m/dist/index.js:915:26
apps/desktop test:unit:     at file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m.pnpm[24m/@vitest+runner@4.0.17/node_modules/[4m@vitest/runner[24m/dist/index.js:1243:20
apps/desktop test:unit:     at new Promise (<anonymous>)
apps/desktop test:unit:     at runWithTimeout (file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m.pnpm[24m/@vitest+runner@4.0.17/node_modules/[4m@vitest/runner[24m/dist/index.js:1209:10)
apps/desktop test:unit: [90mstdout[2m | __tests__/unit/main/opencode/auth-browser.unit.test.ts[2m > [22m[2mOAuthBrowserFlow[2m > [22m[2mstart()[2m > [22m[2mshould reject on non-zero exit code
apps/desktop test:unit: [22m[39m[agent-core] u2d sync test
apps/desktop test:unit: [90mstdout[2m | __tests__/unit/main/opencode/auth-browser.unit.test.ts[2m > [22m[2mOAuthBrowserFlow[2m > [22m[2mstart()[2m > [22m[2mshould reject on non-zero exit code
apps/desktop test:unit: [22m[39m[CLI Resolver] Using local OpenCode CLI executable: \mock\app\path\node_modules\opencode-windows-x64\bin\opencode.exe
apps/desktop test:unit: [90mstderr[2m | __tests__/unit/main/ipc/handlers.unit.test.ts[2m > [22m[2mIPC Handlers Integration[2m > [22m[2mSession Handlers[2m > [22m[2msession:resume should validate session ID
apps/desktop test:unit: [22m[39mIPC handler session:resume failed Error: sessionId is required
apps/desktop test:unit:     at C:/Users/david/Documents/GitHub/accomplish/apps/desktop/__tests__/unit/main/ipc/handlers.unit.test.ts:266:15
apps/desktop test:unit:     at Mock (file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m.pnpm[24m/@vitest+spy@4.0.17/node_modules/[4m@vitest/spy[24m/dist/index.js:285:34)
apps/desktop test:unit:     at C:/Users/david/Documents/GitHub/accomplish/apps/desktop/src/main/ipc/handlers.ts:314:34
apps/desktop test:unit:     at C:/Users/david/Documents/GitHub/accomplish/apps/desktop/src/main/ipc/handlers.ts:133:20
apps/desktop test:unit:     at invokeHandler (C:/Users/david/Documents/GitHub/accomplish/apps/desktop/__tests__/unit/main/ipc/handlers.unit.test.ts:395:10)
apps/desktop test:unit:     at C:/Users/david/Documents/GitHub/accomplish/apps/desktop/__tests__/unit/main/ipc/handlers.unit.test.ts:1278:20
apps/desktop test:unit:     at file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m.pnpm[24m/@vitest+runner@4.0.17/node_modules/[4m@vitest/runner[24m/dist/index.js:145:11
apps/desktop test:unit:     at file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m.pnpm[24m/@vitest+runner@4.0.17/node_modules/[4m@vitest/runner[24m/dist/index.js:915:26
apps/desktop test:unit:     at file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m.pnpm[24m/@vitest+runner@4.0.17/node_modules/[4m@vitest/runner[24m/dist/index.js:1243:20
apps/desktop test:unit:     at new Promise (<anonymous>)
apps/desktop test:unit: [90mstderr[2m | __tests__/unit/main/ipc/handlers.unit.test.ts[2m > [22m[2mIPC Handlers Integration[2m > [22m[2mSession Handlers[2m > [22m[2msession:resume should validate session ID
apps/desktop test:unit: [22m[39mIPC handler session:resume failed Error: sessionId is required
apps/desktop test:unit:     at C:/Users/david/Documents/GitHub/accomplish/apps/desktop/__tests__/unit/main/ipc/handlers.unit.test.ts:266:15
apps/desktop test:unit:     at Mock (file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m.pnpm[24m/@vitest+spy@4.0.17/node_modules/[4m@vitest/spy[24m/dist/index.js:285:34)
apps/desktop test:unit:     at C:/Users/david/Documents/GitHub/accomplish/apps/desktop/src/main/ipc/handlers.ts:314:34
apps/desktop test:unit:     at C:/Users/david/Documents/GitHub/accomplish/apps/desktop/src/main/ipc/handlers.ts:133:20
apps/desktop test:unit:     at invokeHandler (C:/Users/david/Documents/GitHub/accomplish/apps/desktop/__tests__/unit/main/ipc/handlers.unit.test.ts:395:10)
apps/desktop test:unit:     at C:/Users/david/Documents/GitHub/accomplish/apps/desktop/__tests__/unit/main/ipc/handlers.unit.test.ts:1279:20
apps/desktop test:unit: [90m    at processTicksAndRejections (node:internal/process/task_queues:103:5)[39m
apps/desktop test:unit:     at file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m.pnpm[24m/@vitest+runner@4.0.17/node_modules/[4m@vitest/runner[24m/dist/index.js:915:20
apps/desktop test:unit: [90mstderr[2m | __tests__/unit/main/ipc/handlers.unit.test.ts[2m > [22m[2mIPC Handlers Integration[2m > [22m[2mSession Handlers[2m > [22m[2msession:resume should validate prompt
apps/desktop test:unit: [22m[39mIPC handler session:resume failed Error: prompt is required
apps/desktop test:unit:     at C:/Users/david/Documents/GitHub/accomplish/apps/desktop/__tests__/unit/main/ipc/handlers.unit.test.ts:266:15
apps/desktop test:unit:     at Mock (file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m.pnpm[24m/@vitest+spy@4.0.17/node_modules/[4m@vitest/spy[24m/dist/index.js:285:34)
apps/desktop test:unit:     at C:/Users/david/Documents/GitHub/accomplish/apps/desktop/src/main/ipc/handlers.ts:315:31
apps/desktop test:unit:     at C:/Users/david/Documents/GitHub/accomplish/apps/desktop/src/main/ipc/handlers.ts:133:20
apps/desktop test:unit:     at invokeHandler (C:/Users/david/Documents/GitHub/accomplish/apps/desktop/__tests__/unit/main/ipc/handlers.unit.test.ts:395:10)
apps/desktop test:unit:     at C:/Users/david/Documents/GitHub/accomplish/apps/desktop/__tests__/unit/main/ipc/handlers.unit.test.ts:1284:20
apps/desktop test:unit:     at file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m.pnpm[24m/@vitest+runner@4.0.17/node_modules/[4m@vitest/runner[24m/dist/index.js:145:11
apps/desktop test:unit:     at file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m.pnpm[24m/@vitest+runner@4.0.17/node_modules/[4m@vitest/runner[24m/dist/index.js:915:26
apps/desktop test:unit:     at file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m.pnpm[24m/@vitest+runner@4.0.17/node_modules/[4m@vitest/runner[24m/dist/index.js:1243:20
apps/desktop test:unit:     at new Promise (<anonymous>)
apps/desktop test:unit: [90mstderr[2m | __tests__/unit/main/ipc/handlers.unit.test.ts[2m > [22m[2mIPC Handlers Integration[2m > [22m[2mSession Handlers[2m > [22m[2msession:resume should validate prompt
apps/desktop test:unit: [22m[39mIPC handler session:resume failed Error: prompt is required
apps/desktop test:unit:     at C:/Users/david/Documents/GitHub/accomplish/apps/desktop/__tests__/unit/main/ipc/handlers.unit.test.ts:266:15
apps/desktop test:unit:     at Mock (file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m.pnpm[24m/@vitest+spy@4.0.17/node_modules/[4m@vitest/spy[24m/dist/index.js:285:34)
apps/desktop test:unit:     at C:/Users/david/Documents/GitHub/accomplish/apps/desktop/src/main/ipc/handlers.ts:315:31
apps/desktop test:unit:     at C:/Users/david/Documents/GitHub/accomplish/apps/desktop/src/main/ipc/handlers.ts:133:20
apps/desktop test:unit:     at invokeHandler (C:/Users/david/Documents/GitHub/accomplish/apps/desktop/__tests__/unit/main/ipc/handlers.unit.test.ts:395:10)
apps/desktop test:unit:     at C:/Users/david/Documents/GitHub/accomplish/apps/desktop/__tests__/unit/main/ipc/handlers.unit.test.ts:1285:20
apps/desktop test:unit: [90m    at processTicksAndRejections (node:internal/process/task_queues:103:5)[39m
apps/desktop test:unit:     at file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m.pnpm[24m/@vitest+runner@4.0.17/node_modules/[4m@vitest/runner[24m/dist/index.js:915:20
apps/desktop test:unit: [90mstdout[2m | __tests__/unit/main/opencode/auth-browser.unit.test.ts[2m > [22m[2mOAuthBrowserFlow[2m > [22m[2mstart()[2m > [22m[2mshould include exit code in error message
apps/desktop test:unit: [22m[39m[agent-core] u2d sync test
apps/desktop test:unit: [90mstdout[2m | __tests__/unit/main/opencode/auth-browser.unit.test.ts[2m > [22m[2mOAuthBrowserFlow[2m > [22m[2mstart()[2m > [22m[2mshould include exit code in error message
apps/desktop test:unit: [22m[39m[CLI Resolver] Using local OpenCode CLI executable: \mock\app\path\node_modules\opencode-windows-x64\bin\opencode.exe
apps/desktop test:unit: [90mstderr[2m | __tests__/unit/main/ipc/handlers.unit.test.ts[2m > [22m[2mIPC Handlers Integration[2m > [22m[2mWindow Trust Validation[2m > [22m[2mshould throw error when window is destroyed
apps/desktop test:unit: [22m[39mIPC handler task:start failed Error: Untrusted window
apps/desktop test:unit:     at assertTrustedWindow (C:/Users/david/Documents/GitHub/accomplish/apps/desktop/src/main/ipc/handlers.ts:108:11)
apps/desktop test:unit:     at C:/Users/david/Documents/GitHub/accomplish/apps/desktop/src/main/ipc/handlers.ts:148:20
apps/desktop test:unit:     at C:/Users/david/Documents/GitHub/accomplish/apps/desktop/src/main/ipc/handlers.ts:133:20
apps/desktop test:unit:     at invokeHandler (C:/Users/david/Documents/GitHub/accomplish/apps/desktop/__tests__/unit/main/ipc/handlers.unit.test.ts:395:10)
apps/desktop test:unit:     at C:/Users/david/Documents/GitHub/accomplish/apps/desktop/__tests__/unit/main/ipc/handlers.unit.test.ts:1637:20
apps/desktop test:unit: [90m    at processTicksAndRejections (node:internal/process/task_queues:103:5)[39m
apps/desktop test:unit:     at file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m.pnpm[24m/@vitest+runner@4.0.17/node_modules/[4m@vitest/runner[24m/dist/index.js:915:20
apps/desktop test:unit: [90mstdout[2m | __tests__/unit/main/opencode/auth-browser.unit.test.ts[2m > [22m[2mOAuthBrowserFlow[2m > [22m[2mstart()[2m > [22m[2mshould cancel previous flow before starting new one
apps/desktop test:unit: [22m[39m[agent-core] u2d sync test
apps/desktop test:unit: [90mstderr[2m | __tests__/unit/main/ipc/handlers.unit.test.ts[2m > [22m[2mIPC Handlers Integration[2m > [22m[2mWindow Trust Validation[2m > [22m[2mshould throw error when window is null
apps/desktop test:unit: [22m[39mIPC handler task:start failed Error: Untrusted window
apps/desktop test:unit:     at assertTrustedWindow (C:/Users/david/Documents/GitHub/accomplish/apps/desktop/src/main/ipc/handlers.ts:108:11)
apps/desktop test:unit:     at C:/Users/david/Documents/GitHub/accomplish/apps/desktop/src/main/ipc/handlers.ts:148:20
apps/desktop test:unit:     at C:/Users/david/Documents/GitHub/accomplish/apps/desktop/src/main/ipc/handlers.ts:133:20
apps/desktop test:unit:     at invokeHandler (C:/Users/david/Documents/GitHub/accomplish/apps/desktop/__tests__/unit/main/ipc/handlers.unit.test.ts:395:10)
apps/desktop test:unit:     at C:/Users/david/Documents/GitHub/accomplish/apps/desktop/__tests__/unit/main/ipc/handlers.unit.test.ts:1648:20
apps/desktop test:unit: [90m    at processTicksAndRejections (node:internal/process/task_queues:103:5)[39m
apps/desktop test:unit:     at file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m.pnpm[24m/@vitest+runner@4.0.17/node_modules/[4m@vitest/runner[24m/dist/index.js:915:20
apps/desktop test:unit: [90mstdout[2m | __tests__/unit/main/opencode/auth-browser.unit.test.ts[2m > [22m[2mOAuthBrowserFlow[2m > [22m[2mstart()[2m > [22m[2mshould cancel previous flow before starting new one
apps/desktop test:unit: [22m[39m[CLI Resolver] Using local OpenCode CLI executable: \mock\app\path\node_modules\opencode-windows-x64\bin\opencode.exe
apps/desktop test:unit: [90mstdout[2m | __tests__/unit/main/opencode/auth-browser.unit.test.ts[2m > [22m[2mOAuthBrowserFlow[2m > [22m[2mstart()[2m > [22m[2mshould cancel previous flow before starting new one
apps/desktop test:unit: [22m[39m[OAuthBrowserFlow] Cancelling previous flow before starting new one
apps/desktop test:unit: [OAuthBrowserFlow] Cancelling active OAuth flow
apps/desktop test:unit: [90mstderr[2m | __tests__/unit/main/ipc/handlers.unit.test.ts[2m > [22m[2mIPC Handlers Integration[2m > [22m[2mWindow Trust Validation[2m > [22m[2mshould throw error when IPC from non-focused window with multiple windows
apps/desktop test:unit: [22m[39mIPC handler task:start failed Error: IPC request must originate from the focused window
apps/desktop test:unit:     at assertTrustedWindow (C:/Users/david/Documents/GitHub/accomplish/apps/desktop/src/main/ipc/handlers.ts:113:11)
apps/desktop test:unit:     at C:/Users/david/Documents/GitHub/accomplish/apps/desktop/src/main/ipc/handlers.ts:148:20
apps/desktop test:unit:     at C:/Users/david/Documents/GitHub/accomplish/apps/desktop/src/main/ipc/handlers.ts:133:20
apps/desktop test:unit:     at invokeHandler (C:/Users/david/Documents/GitHub/accomplish/apps/desktop/__tests__/unit/main/ipc/handlers.unit.test.ts:395:10)
apps/desktop test:unit:     at C:/Users/david/Documents/GitHub/accomplish/apps/desktop/__tests__/unit/main/ipc/handlers.unit.test.ts:1676:20
apps/desktop test:unit: [90m    at processTicksAndRejections (node:internal/process/task_queues:103:5)[39m
apps/desktop test:unit:     at file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m.pnpm[24m/@vitest+runner@4.0.17/node_modules/[4m@vitest/runner[24m/dist/index.js:915:20
apps/desktop test:unit: [90mstdout[2m | __tests__/unit/main/ipc/handlers.unit.test.ts[2m > [22m[2mIPC Handlers Integration[2m > [22m[2mAPI Key Validation Timeout[2m > [22m[2mapi-key:validate should handle abort error
apps/desktop test:unit: [22m[39m[API Key] Validation requested for provider: anthropic
apps/desktop test:unit: [90mstderr[2m | __tests__/unit/main/ipc/handlers.unit.test.ts[2m > [22m[2mIPC Handlers Integration[2m > [22m[2mAPI Key Validation Timeout[2m > [22m[2mapi-key:validate should handle abort error
apps/desktop test:unit: [22m[39m[API Key] Validation failed {
apps/desktop test:unit:   error: [32m'Request timed out. Please check your internet connection and try again.'[39m
apps/desktop test:unit: }
apps/desktop test:unit: [90mstdout[2m | __tests__/unit/main/opencode/auth-browser.unit.test.ts[2m > [22m[2mOAuthBrowserFlow[2m > [22m[2mcancel()[2m > [22m[2mshould do nothing when no flow is active
apps/desktop test:unit: [22m[39m[agent-core] u2d sync test
apps/desktop test:unit: [90mstdout[2m | __tests__/unit/main/ipc/handlers.unit.test.ts[2m > [22m[2mIPC Handlers Integration[2m > [22m[2mAPI Key Validation Timeout[2m > [22m[2mapi-key:validate should handle network errors
apps/desktop test:unit: [22m[39m[API Key] Validation requested for provider: anthropic
apps/desktop test:unit: [90mstderr[2m | __tests__/unit/main/ipc/handlers.unit.test.ts[2m > [22m[2mIPC Handlers Integration[2m > [22m[2mAPI Key Validation Timeout[2m > [22m[2mapi-key:validate should handle network errors
apps/desktop test:unit: [22m[39m[API Key] Validation failed {
apps/desktop test:unit:   error: [32m'Failed to validate API key. Check your internet connection.'[39m
apps/desktop test:unit: }
apps/desktop test:unit: [90mstdout[2m | __tests__/unit/main/opencode/auth-browser.unit.test.ts[2m > [22m[2mOAuthBrowserFlow[2m > [22m[2mcancel()[2m > [22m[2mshould do nothing when no flow is active
apps/desktop test:unit: [22m[39m[OAuthBrowserFlow] No active flow to cancel
apps/desktop test:unit: [90mstdout[2m | __tests__/unit/main/ipc/handlers.unit.test.ts[2m > [22m[2mIPC Handlers Integration[2m > [22m[2mAPI Key Validation Timeout[2m > [22m[2mapi-key:validate should return invalid for non-200 response
apps/desktop test:unit: [22m[39m[API Key] Validation requested for provider: anthropic
apps/desktop test:unit: [90mstderr[2m | __tests__/unit/main/ipc/handlers.unit.test.ts[2m > [22m[2mIPC Handlers Integration[2m > [22m[2mAPI Key Validation Timeout[2m > [22m[2mapi-key:validate should return invalid for non-200 response
apps/desktop test:unit: [22m[39m[API Key] Validation failed { error: [32m'Invalid API key'[39m }
apps/desktop test:unit: [90mstdout[2m | __tests__/unit/main/ipc/handlers.unit.test.ts[2m > [22m[2mIPC Handlers Integration[2m > [22m[2mAPI Key Validation Timeout[2m > [22m[2mapi-key:validate should return valid for 200 response
apps/desktop test:unit: [22m[39m[API Key] Validation requested for provider: anthropic
apps/desktop test:unit: [90mstdout[2m | __tests__/unit/main/ipc/handlers.unit.test.ts[2m > [22m[2mIPC Handlers Integration[2m > [22m[2mAPI Key Validation Timeout[2m > [22m[2mapi-key:validate should return valid for 200 response
apps/desktop test:unit: [22m[39m[API Key] Validation succeeded
apps/desktop test:unit: [90mstdout[2m | __tests__/unit/main/ipc/handlers.unit.test.ts[2m > [22m[2mIPC Handlers Integration[2m > [22m[2mMulti-Provider API Key Validation[2m > [22m[2mapi-key:validate-provider should skip validation for custom provider
apps/desktop test:unit: [22m[39m[API Key] Validation requested for provider: custom
apps/desktop test:unit: [API Key] Skipping validation for custom (local/custom provider)
apps/desktop test:unit: [90mstdout[2m | __tests__/unit/main/ipc/handlers.unit.test.ts[2m > [22m[2mIPC Handlers Integration[2m > [22m[2mMulti-Provider API Key Validation[2m > [22m[2mapi-key:validate-provider should validate OpenAI key
apps/desktop test:unit: [22m[39m[API Key] Validation requested for provider: openai
apps/desktop test:unit: [90mstdout[2m | __tests__/unit/main/ipc/handlers.unit.test.ts[2m > [22m[2mIPC Handlers Integration[2m > [22m[2mMulti-Provider API Key Validation[2m > [22m[2mapi-key:validate-provider should validate OpenAI key
apps/desktop test:unit: [22m[39m[API Key] Validation succeeded for openai
apps/desktop test:unit: [90mstdout[2m | __tests__/unit/main/ipc/handlers.unit.test.ts[2m > [22m[2mIPC Handlers Integration[2m > [22m[2mMulti-Provider API Key Validation[2m > [22m[2mapi-key:validate-provider should validate Google key
apps/desktop test:unit: [22m[39m[API Key] Validation requested for provider: google
apps/desktop test:unit: [90mstdout[2m | __tests__/unit/main/ipc/handlers.unit.test.ts[2m > [22m[2mIPC Handlers Integration[2m > [22m[2mMulti-Provider API Key Validation[2m > [22m[2mapi-key:validate-provider should validate Google key
apps/desktop test:unit: [22m[39m[API Key] Validation succeeded for google
apps/desktop test:unit: [90mstdout[2m | __tests__/unit/main/opencode/auth-browser.unit.test.ts[2m > [22m[2mOAuthBrowserFlow[2m > [22m[2mcancel()[2m > [22m[2mshould send Ctrl+C to PTY
apps/desktop test:unit: [22m[39m[agent-core] u2d sync test
apps/desktop test:unit: [90mstdout[2m | __tests__/unit/main/ipc/handlers.unit.test.ts[2m > [22m[2mIPC Handlers Integration[2m > [22m[2mMulti-Provider API Key Validation[2m > [22m[2mapi-key:validate-provider should handle AbortError
apps/desktop test:unit: [22m[39m[API Key] Validation requested for provider: openai
apps/desktop test:unit: [90mstderr[2m | __tests__/unit/main/ipc/handlers.unit.test.ts[2m > [22m[2mIPC Handlers Integration[2m > [22m[2mMulti-Provider API Key Validation[2m > [22m[2mapi-key:validate-provider should handle AbortError
apps/desktop test:unit: [22m[39m[API Key] Validation failed for openai {
apps/desktop test:unit:   error: [32m'Request timed out. Please check your internet connection and try again.'[39m
apps/desktop test:unit: }
apps/desktop test:unit: [90mstdout[2m | __tests__/unit/main/opencode/auth-browser.unit.test.ts[2m > [22m[2mOAuthBrowserFlow[2m > [22m[2mcancel()[2m > [22m[2mshould send Ctrl+C to PTY
apps/desktop test:unit: [22m[39m[CLI Resolver] Using local OpenCode CLI executable: \mock\app\path\node_modules\opencode-windows-x64\bin\opencode.exe
apps/desktop test:unit: [90mstdout[2m | __tests__/unit/main/opencode/auth-browser.unit.test.ts[2m > [22m[2mOAuthBrowserFlow[2m > [22m[2mcancel()[2m > [22m[2mshould send Ctrl+C to PTY
apps/desktop test:unit: [22m[39m[OAuthBrowserFlow] Cancelling active OAuth flow
apps/desktop test:unit: [90mstdout[2m | __tests__/unit/main/ipc/handlers.unit.test.ts[2m > [22m[2mIPC Handlers Integration[2m > [22m[2mMulti-Provider API Key Validation[2m > [22m[2mapi-key:validate-provider should handle failed response with error message
apps/desktop test:unit: [22m[39m[API Key] Validation requested for provider: openai
apps/desktop test:unit: [90mstderr[2m | __tests__/unit/main/ipc/handlers.unit.test.ts[2m > [22m[2mIPC Handlers Integration[2m > [22m[2mMulti-Provider API Key Validation[2m > [22m[2mapi-key:validate-provider should handle failed response with error message
apps/desktop test:unit: [22m[39m[API Key] Validation failed for openai { error: [32m'Access denied'[39m }
apps/desktop test:unit: [90mstdout[2m | __tests__/unit/main/ipc/handlers.unit.test.ts[2m > [22m[2mIPC Handlers Integration[2m > [22m[2mMulti-Provider API Key Validation[2m > [22m[2mapi-key:validate-provider should handle failed response without error message
apps/desktop test:unit: [22m[39m[API Key] Validation requested for provider: openai
apps/desktop test:unit: [90mstderr[2m | __tests__/unit/main/ipc/handlers.unit.test.ts[2m > [22m[2mIPC Handlers Integration[2m > [22m[2mMulti-Provider API Key Validation[2m > [22m[2mapi-key:validate-provider should handle failed response without error message
apps/desktop test:unit: [22m[39m[API Key] Validation failed for openai { error: [32m'API returned status 500'[39m }
apps/desktop test:unit: [90mstderr[2m | __tests__/unit/main/ipc/handlers.unit.test.ts[2m > [22m[2mIPC Handlers Integration[2m > [22m[2mSettings Add API Key with Label[2m > [22m[2msettings:add-api-key should validate label length
apps/desktop test:unit: [22m[39mIPC handler settings:add-api-key failed Error: label exceeds maximum length of 128
apps/desktop test:unit:     at C:/Users/david/Documents/GitHub/accomplish/apps/desktop/__tests__/unit/main/ipc/handlers.unit.test.ts:269:15
apps/desktop test:unit:     at Mock (file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m.pnpm[24m/@vitest+spy@4.0.17/node_modules/[4m@vitest/spy[24m/dist/index.js:285:34)
apps/desktop test:unit:     at C:/Users/david/Documents/GitHub/accomplish/apps/desktop/src/main/ipc/handlers.ts:440:38
apps/desktop test:unit:     at C:/Users/david/Documents/GitHub/accomplish/apps/desktop/src/main/ipc/handlers.ts:133:20
apps/desktop test:unit:     at invokeHandler (C:/Users/david/Documents/GitHub/accomplish/apps/desktop/__tests__/unit/main/ipc/handlers.unit.test.ts:395:10)
apps/desktop test:unit:     at C:/Users/david/Documents/GitHub/accomplish/apps/desktop/__tests__/unit/main/ipc/handlers.unit.test.ts:2037:20
apps/desktop test:unit:     at file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m.pnpm[24m/@vitest+runner@4.0.17/node_modules/[4m@vitest/runner[24m/dist/index.js:145:11
apps/desktop test:unit:     at file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m.pnpm[24m/@vitest+runner@4.0.17/node_modules/[4m@vitest/runner[24m/dist/index.js:915:26
apps/desktop test:unit:     at file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m.pnpm[24m/@vitest+runner@4.0.17/node_modules/[4m@vitest/runner[24m/dist/index.js:1243:20
apps/desktop test:unit:     at new Promise (<anonymous>)
apps/desktop test:unit:  [32mÔ£ô[39m [30m[42m unit [49m[39m __tests__/unit/main/ipc/handlers.unit.test.ts [2m([22m[2m88 tests[22m[2m)[22m[32m 206[2mms[22m[39m
apps/desktop test:unit: [90mstdout[2m | __tests__/unit/main/opencode/auth-browser.unit.test.ts[2m > [22m[2mOAuthBrowserFlow[2m > [22m[2mcancel()[2m > [22m[2mshould send Ctrl+C to PTY
apps/desktop test:unit: [22m[39m[OAuthBrowserFlow] Port 1455 released
apps/desktop test:unit: [90mstdout[2m | __tests__/unit/main/opencode/auth-browser.unit.test.ts[2m > [22m[2mOAuthBrowserFlow[2m > [22m[2mcancel()[2m > [22m[2mshould send Ctrl+C to PTY
apps/desktop test:unit: [22m[39m[CLI Resolver] Using local OpenCode CLI executable: \mock\app\path\node_modules\opencode-windows-x64\bin\opencode.exe
apps/desktop test:unit: [90mstdout[2m | __tests__/unit/main/opencode/auth-browser.unit.test.ts[2m > [22m[2mOAuthBrowserFlow[2m > [22m[2mcancel()[2m > [22m[2mshould send Ctrl+C to PTY
apps/desktop test:unit: [22m[39m[OAuthBrowserFlow] Force killing after graceful timeout
apps/desktop test:unit: [90mstdout[2m | __tests__/unit/main/opencode/auth-browser.unit.test.ts[2m > [22m[2mOAuthBrowserFlow[2m > [22m[2mcancel()[2m > [22m[2mshould send Y confirmation on Windows
apps/desktop test:unit: [22m[39m[agent-core] u2d sync test
apps/desktop test:unit: [90mstdout[2m | __tests__/unit/main/opencode/auth-browser.unit.test.ts[2m > [22m[2mOAuthBrowserFlow[2m > [22m[2mcancel()[2m > [22m[2mshould send Y confirmation on Windows
apps/desktop test:unit: [22m[39m[CLI Resolver] Using local OpenCode CLI executable: \mock\app\path\node_modules\opencode-windows-x64\bin\opencode.exe
apps/desktop test:unit: [90mstdout[2m | __tests__/unit/main/opencode/auth-browser.unit.test.ts[2m > [22m[2mOAuthBrowserFlow[2m > [22m[2mcancel()[2m > [22m[2mshould send Y confirmation on Windows
apps/desktop test:unit: [22m[39m[OAuthBrowserFlow] Cancelling active OAuth flow
apps/desktop test:unit: [90mstdout[2m | __tests__/unit/main/opencode/auth-browser.unit.test.ts[2m > [22m[2mOAuthBrowserFlow[2m > [22m[2mcancel()[2m > [22m[2mshould send Y confirmation on Windows
apps/desktop test:unit: [22m[39m[OAuthBrowserFlow] Force killing after graceful timeout
apps/desktop test:unit: [90mstdout[2m | __tests__/unit/main/opencode/auth-browser.unit.test.ts[2m > [22m[2mOAuthBrowserFlow[2m > [22m[2mcancel()[2m > [22m[2mshould force kill if graceful exit times out
apps/desktop test:unit: [22m[39m[agent-core] u2d sync test
apps/desktop test:unit: [90mstdout[2m | __tests__/unit/main/opencode/auth-browser.unit.test.ts[2m > [22m[2mOAuthBrowserFlow[2m > [22m[2mcancel()[2m > [22m[2mshould force kill if graceful exit times out
apps/desktop test:unit: [22m[39m[CLI Resolver] Using local OpenCode CLI executable: \mock\app\path\node_modules\opencode-windows-x64\bin\opencode.exe
apps/desktop test:unit: [90mstdout[2m | __tests__/unit/main/opencode/auth-browser.unit.test.ts[2m > [22m[2mOAuthBrowserFlow[2m > [22m[2mcancel()[2m > [22m[2mshould force kill if graceful exit times out
apps/desktop test:unit: [22m[39m[OAuthBrowserFlow] Cancelling active OAuth flow
apps/desktop test:unit: [90mstdout[2m | __tests__/unit/main/opencode/auth-browser.unit.test.ts[2m > [22m[2mOAuthBrowserFlow[2m > [22m[2mcancel()[2m > [22m[2mshould force kill if graceful exit times out
apps/desktop test:unit: [22m[39m[OAuthBrowserFlow] Force killing after graceful timeout
apps/desktop test:unit: [90mstdout[2m | __tests__/unit/main/opencode/auth-browser.unit.test.ts[2m > [22m[2mOAuthBrowserFlow[2m > [22m[2mcancel()[2m > [22m[2mshould clear activePty after cancel
apps/desktop test:unit: [22m[39m[agent-core] u2d sync test
apps/desktop test:unit: [90mstdout[2m | __tests__/unit/main/opencode/auth-browser.unit.test.ts[2m > [22m[2mOAuthBrowserFlow[2m > [22m[2mcancel()[2m > [22m[2mshould clear activePty after cancel
apps/desktop test:unit: [22m[39m[CLI Resolver] Using local OpenCode CLI executable: \mock\app\path\node_modules\opencode-windows-x64\bin\opencode.exe
apps/desktop test:unit: [90mstdout[2m | __tests__/unit/main/opencode/auth-browser.unit.test.ts[2m > [22m[2mOAuthBrowserFlow[2m > [22m[2mdispose()[2m > [22m[2mshould kill active PTY
apps/desktop test:unit: [22m[39m[agent-core] u2d sync test
apps/desktop test:unit: [90mstdout[2m | __tests__/unit/main/opencode/auth-browser.unit.test.ts[2m > [22m[2mOAuthBrowserFlow[2m > [22m[2mdispose()[2m > [22m[2mshould kill active PTY
apps/desktop test:unit: [22m[39m[CLI Resolver] Using local OpenCode CLI executable: \mock\app\path\node_modules\opencode-windows-x64\bin\opencode.exe
apps/desktop test:unit: [90mstdout[2m | __tests__/unit/main/opencode/auth-browser.unit.test.ts[2m > [22m[2mOAuthBrowserFlow[2m > [22m[2mdispose()[2m > [22m[2mshould kill active PTY
apps/desktop test:unit: [22m[39m[OAuthBrowserFlow] Disposing
apps/desktop test:unit: [90mstdout[2m | __tests__/unit/main/opencode/auth-browser.unit.test.ts[2m > [22m[2mOAuthBrowserFlow[2m > [22m[2mdispose()[2m > [22m[2mshould be idempotent
apps/desktop test:unit: [22m[39m[agent-core] u2d sync test
apps/desktop test:unit: [90mstdout[2m | __tests__/unit/main/opencode/auth-browser.unit.test.ts[2m > [22m[2mOAuthBrowserFlow[2m > [22m[2mdispose()[2m > [22m[2mshould be idempotent
apps/desktop test:unit: [22m[39m[CLI Resolver] Using local OpenCode CLI executable: \mock\app\path\node_modules\opencode-windows-x64\bin\opencode.exe
apps/desktop test:unit: [90mstdout[2m | __tests__/unit/main/opencode/auth-browser.unit.test.ts[2m > [22m[2mOAuthBrowserFlow[2m > [22m[2mdispose()[2m > [22m[2mshould be idempotent
apps/desktop test:unit: [22m[39m[OAuthBrowserFlow] Disposing
apps/desktop test:unit: [90mstdout[2m | __tests__/unit/main/opencode/auth-browser.unit.test.ts[2m > [22m[2mOAuthBrowserFlow[2m > [22m[2mdispose()[2m > [22m[2mshould not throw when no active PTY
apps/desktop test:unit: [22m[39m[agent-core] u2d sync test
apps/desktop test:unit: [90mstdout[2m | __tests__/unit/main/opencode/auth-browser.unit.test.ts[2m > [22m[2mOAuthBrowserFlow[2m > [22m[2mdispose()[2m > [22m[2mshould not throw when no active PTY
apps/desktop test:unit: [22m[39m[OAuthBrowserFlow] Disposing
apps/desktop test:unit: [90mstdout[2m | __tests__/unit/main/opencode/auth-browser.unit.test.ts[2m > [22m[2mOAuthBrowserFlow[2m > [22m[2mconvenience exports[2m > [22m[2mshould export loginOpenAiWithChatGpt function
apps/desktop test:unit: [22m[39m[agent-core] u2d sync test
apps/desktop test:unit: [90mstdout[2m | __tests__/unit/main/opencode/auth-browser.unit.test.ts[2m > [22m[2mOAuthBrowserFlow[2m > [22m[2mconvenience exports[2m > [22m[2mshould export oauthBrowserFlow singleton
apps/desktop test:unit: [22m[39m[agent-core] u2d sync test
apps/desktop test:unit: [90mstdout[2m | __tests__/unit/main/opencode/auth-browser.unit.test.ts[2m > [22m[2mOAuthBrowserFlow[2m > [22m[2merror scenarios[2m > [22m[2mshould handle PTY kill errors during cancel gracefully
apps/desktop test:unit: [22m[39m[agent-core] u2d sync test
apps/desktop test:unit: [90mstdout[2m | __tests__/unit/main/opencode/auth-browser.unit.test.ts[2m > [22m[2mOAuthBrowserFlow[2m > [22m[2merror scenarios[2m > [22m[2mshould handle PTY kill errors during cancel gracefully
apps/desktop test:unit: [22m[39m[CLI Resolver] Using local OpenCode CLI executable: \mock\app\path\node_modules\opencode-windows-x64\bin\opencode.exe
apps/desktop test:unit: [90mstdout[2m | __tests__/unit/main/opencode/auth-browser.unit.test.ts[2m > [22m[2mOAuthBrowserFlow[2m > [22m[2merror scenarios[2m > [22m[2mshould handle PTY kill errors during cancel gracefully
apps/desktop test:unit: [22m[39m[OAuthBrowserFlow] Cancelling active OAuth flow
apps/desktop test:unit: [90mstderr[2m | __tests__/unit/main/opencode/auth-browser.unit.test.ts[2m > [22m[2mOAuthBrowserFlow[2m > [22m[2merror scenarios[2m > [22m[2mshould handle PTY kill errors during cancel gracefully
apps/desktop test:unit: [22m[39m[OAuthBrowserFlow] Error during force kill: Error: Kill failed
apps/desktop test:unit:     at MockPty.<anonymous> (C:/Users/david/Documents/GitHub/accomplish/apps/desktop/__tests__/unit/main/opencode/auth-browser.unit.test.ts:450:15)
apps/desktop test:unit:     at MockPty.Mock (file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m.pnpm[24m/@vitest+spy@4.0.17/node_modules/[4m@vitest/spy[24m/dist/index.js:285:34)
apps/desktop test:unit:     at OAuthBrowserFlow.cancel (C:/Users/david/Documents/GitHub/accomplish/apps/desktop/src/main/opencode/auth-browser.ts:154:20)
apps/desktop test:unit:     at C:/Users/david/Documents/GitHub/accomplish/apps/desktop/__tests__/unit/main/opencode/auth-browser.unit.test.ts:454:7
apps/desktop test:unit:     at file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m.pnpm[24m/@vitest+runner@4.0.17/node_modules/[4m@vitest/runner[24m/dist/index.js:915:20
apps/desktop test:unit: [90mstdout[2m | __tests__/unit/main/opencode/auth-browser.unit.test.ts[2m > [22m[2mOAuthBrowserFlow[2m > [22m[2merror scenarios[2m > [22m[2mshould handle PTY kill errors during cancel gracefully
apps/desktop test:unit: [22m[39m[OAuthBrowserFlow] Force killing after graceful timeout
apps/desktop test:unit: [90mstdout[2m | __tests__/unit/main/opencode/auth-browser.unit.test.ts[2m > [22m[2mOAuthBrowserFlow[2m > [22m[2merror scenarios[2m > [22m[2mshould handle PTY kill errors during dispose gracefully
apps/desktop test:unit: [22m[39m[agent-core] u2d sync test
apps/desktop test:unit: [90mstdout[2m | __tests__/unit/main/opencode/auth-browser.unit.test.ts[2m > [22m[2mOAuthBrowserFlow[2m > [22m[2merror scenarios[2m > [22m[2mshould handle PTY kill errors during dispose gracefully
apps/desktop test:unit: [22m[39m[CLI Resolver] Using local OpenCode CLI executable: \mock\app\path\node_modules\opencode-windows-x64\bin\opencode.exe
apps/desktop test:unit: [90mstderr[2m | __tests__/unit/main/opencode/auth-browser.unit.test.ts[2m > [22m[2mOAuthBrowserFlow[2m > [22m[2merror scenarios[2m > [22m[2mshould handle PTY kill errors during dispose gracefully
apps/desktop test:unit: [22m[39m[OAuthBrowserFlow] Error killing PTY during dispose: Error: Kill failed
apps/desktop test:unit:     at MockPty.<anonymous> (C:/Users/david/Documents/GitHub/accomplish/apps/desktop/__tests__/unit/main/opencode/auth-browser.unit.test.ts:465:15)
apps/desktop test:unit:     at MockPty.Mock (file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m.pnpm[24m/@vitest+spy@4.0.17/node_modules/[4m@vitest/spy[24m/dist/index.js:285:34)
apps/desktop test:unit:     at OAuthBrowserFlow.dispose (C:/Users/david/Documents/GitHub/accomplish/apps/desktop/src/main/opencode/auth-browser.ts:171:24)
apps/desktop test:unit:     at C:/Users/david/Documents/GitHub/accomplish/apps/desktop/__tests__/unit/main/opencode/auth-browser.unit.test.ts:469:37
apps/desktop test:unit:     at Proxy.assertThrows (file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m.pnpm[24m/chai@6.2.2/node_modules/[4mchai[24m/index.js:2798:5)
apps/desktop test:unit:     at Proxy.methodWrapper (file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m.pnpm[24m/chai@6.2.2/node_modules/[4mchai[24m/index.js:1700:25)
apps/desktop test:unit:     at Proxy.<anonymous> (file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m.pnpm[24m/@vitest+expect@4.0.17/node_modules/[4m@vitest/expect[24m/dist/index.js:1149:12)
apps/desktop test:unit:     at Proxy.overwritingMethodWrapper (file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m.pnpm[24m/chai@6.2.2/node_modules/[4mchai[24m/index.js:1750:33)
apps/desktop test:unit:     at Proxy.<anonymous> (file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m.pnpm[24m/@vitest+expect@4.0.17/node_modules/[4m@vitest/expect[24m/dist/index.js:1485:16)
apps/desktop test:unit:     at Proxy.<anonymous> (file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m.pnpm[24m/@vitest+expect@4.0.17/node_modules/[4m@vitest/expect[24m/dist/index.js:1090:14)
apps/desktop test:unit: [90mstdout[2m | __tests__/unit/main/opencode/auth-browser.unit.test.ts[2m > [22m[2mOAuthBrowserFlow[2m > [22m[2merror scenarios[2m > [22m[2mshould handle PTY kill errors during dispose gracefully
apps/desktop test:unit: [22m[39m[OAuthBrowserFlow] Disposing
apps/desktop test:unit: [90mstdout[2m | __tests__/unit/main/opencode/auth-browser.unit.test.ts[2m > [22m[2mOAuthBrowserFlow[2m > [22m[2merror scenarios[2m > [22m[2mshould redact sensitive data in error messages
apps/desktop test:unit: [22m[39m[agent-core] u2d sync test
apps/desktop test:unit: [90mstdout[2m | __tests__/unit/main/opencode/auth-browser.unit.test.ts[2m > [22m[2mOAuthBrowserFlow[2m > [22m[2merror scenarios[2m > [22m[2mshould redact sensitive data in error messages
apps/desktop test:unit: [22m[39m[CLI Resolver] Using local OpenCode CLI executable: \mock\app\path\node_modules\opencode-windows-x64\bin\opencode.exe
apps/desktop test:unit:  [32mÔ£ô[39m [30m[42m unit [49m[39m __tests__/unit/main/opencode/auth-browser.unit.test.ts [2m([22m[2m24 tests[22m[2m)[22m[33m 10195[2mms[22m[39m
apps/desktop test:unit:        [33m[2mÔ£ô[22m[39m should return false when no flow is active [33m 6273[2mms[22m[39m
apps/desktop test:unit:        [33m[2mÔ£ô[22m[39m should send Ctrl+C to PTY [33m 1139[2mms[22m[39m
apps/desktop test:unit:        [33m[2mÔ£ô[22m[39m should send Y confirmation on Windows [33m 1133[2mms[22m[39m
apps/desktop test:unit:        [33m[2mÔ£ô[22m[39m should handle PTY kill errors during cancel gracefully [33m 1138[2mms[22m[39m
apps/desktop test:unit: [2m Test Files [22m [1m[32m8 passed[39m[22m[90m (8)[39m
apps/desktop test:unit: [2m      Tests [22m [1m[32m325 passed[39m[22m[90m (325)[39m
apps/desktop test:unit: [2m   Start at [22m 17:56:29
apps/desktop test:unit: [2m   Duration [22m 11.82s[2m (transform 12.90s, setup 536ms, import 26.32s, tests 16.41s, environment 3ms)[22m
apps/desktop test:unit: Done
